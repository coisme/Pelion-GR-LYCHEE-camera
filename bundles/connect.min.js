!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(t.MbedCloudSDK||(t.MbedCloudSDK={})).ConnectApi=e()}}(function(){var e;return function(){function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){return o(t[s][1][e]||e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}return e}()({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("typescript-logging");r.loggerFactory=function(e,t){var r=new n.LoggerFactoryOptions;switch(t){case"FATAL":r.addLogGroupRule(new n.LogGroupRule(new RegExp(".+"),n.LogLevel.Fatal));break;case"ERROR":r.addLogGroupRule(new n.LogGroupRule(new RegExp(".+"),n.LogLevel.Error));break;case"WARN":r.addLogGroupRule(new n.LogGroupRule(new RegExp(".+"),n.LogLevel.Warn));break;case"INFO":r.addLogGroupRule(new n.LogGroupRule(new RegExp(".+"),n.LogLevel.Info));break;case"DEBUG":r.addLogGroupRule(new n.LogGroupRule(new RegExp(".+"),n.LogLevel.Debug));break;case"ALL":r.addLogGroupRule(new n.LogGroupRule(new RegExp(".+"),n.LogLevel.Trace));break;default:r.addLogGroupRule(new n.LogGroupRule(new RegExp(".+"),n.LogLevel.Fatal))}return n.LFService.createNamedLoggerFactory(e+"SDKLogger",r)}},{"typescript-logging":87}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isObject=function(e){return null!==e&&!Array.isArray(e)&&("function"==typeof e||"object"==typeof e)},r.isJwt=function(e){return!(!e||!e.startsWith("rt_"))}},{}],3:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../common/apiBase"),i=e("../common/sdkError"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.deviceCreate=function(e,t,r){if(null===e||void 0===e)return void(t&&t(new i.SDKError("Required parameter 'device' missing.")));var n={},o={},s={},a=[],u=["application/json"];return this.request({url:"/v3/devices/",method:"POST",headers:n,query:o,formParams:s,useFormData:!1,contentTypes:a,acceptTypes:u,requestOptions:r,body:e},t)},t.prototype.deviceDestroy=function(e,t,r){if(null===e||void 0===e)return void(t&&t(new i.SDKError("Required parameter 'id' missing.")));var n={},o={},s={},a=[],u=["application/json"];return this.request({url:"/v3/devices/{id}/".replace("{id}",String(e)),method:"DELETE",headers:n,query:o,formParams:s,useFormData:!1,contentTypes:a,acceptTypes:u,requestOptions:r},t)},t.prototype.deviceEventList=function(e,t,r,n,o,i,s){var a={},u={};void 0!==e&&(u.limit=e),void 0!==t&&(u.order=t),void 0!==r&&(u.after=r),void 0!==n&&(u.filter=n),void 0!==o&&(u.include=o);var c={},l=[],p=["application/json"];return this.request({url:"/v3/device-events/",method:"GET",headers:a,query:u,formParams:c,useFormData:!1,contentTypes:l,acceptTypes:p,requestOptions:s},i)},t.prototype.deviceEventRetrieve=function(e,t,r){if(null===e||void 0===e)return void(t&&t(new i.SDKError("Required parameter 'deviceEventId' missing.")));var n={},o={},s={},a=[],u=["application/json"];return this.request({url:"/v3/device-events/{device_event_id}/".replace("{device_event_id}",String(e)),method:"GET",headers:n,query:o,formParams:s,useFormData:!1,contentTypes:a,acceptTypes:u,requestOptions:r},t)},t.prototype.deviceList=function(e,t,r,n,o,i,s){var a={},u={};void 0!==e&&(u.limit=e),void 0!==t&&(u.order=t),void 0!==r&&(u.after=r),void 0!==n&&(u.filter=n),void 0!==o&&(u.include=o);var c={},l=[],p=["application/json"];return this.request({url:"/v3/devices/",method:"GET",headers:a,query:u,formParams:c,useFormData:!1,contentTypes:l,acceptTypes:p,requestOptions:s},i)},t.prototype.deviceLogList=function(e,t,r,n,o,i,s){var a={},u={};void 0!==e&&(u.limit=e),void 0!==t&&(u.order=t),void 0!==r&&(u.after=r),void 0!==n&&(u.filter=n),void 0!==o&&(u.include=o);var c={},l=[],p=["application/json"];return this.request({url:"/v3/devicelog/",method:"GET",headers:a,query:u,formParams:c,useFormData:!1,contentTypes:l,acceptTypes:p,requestOptions:s},i)},t.prototype.deviceLogRetrieve=function(e,t,r){if(null===e||void 0===e)return void(t&&t(new i.SDKError("Required parameter 'deviceEventId' missing.")));var n={},o={},s={},a=[],u=["application/json"];return this.request({url:"/v3/devicelog/{device_event_id}/".replace("{device_event_id}",String(e)),method:"GET",headers:n,query:o,formParams:s,useFormData:!1,contentTypes:a,acceptTypes:u,requestOptions:r},t)},t.prototype.deviceQueryCreate=function(e,t,r){if(null===e||void 0===e)return void(t&&t(new i.SDKError("Required parameter 'device' missing.")));var n={},o={},s={},a=[],u=["application/json"];return this.request({url:"/v3/device-queries/",method:"POST",headers:n,query:o,formParams:s,useFormData:!1,contentTypes:a,acceptTypes:u,requestOptions:r,body:e},t)},t.prototype.deviceQueryDestroy=function(e,t,r){if(null===e||void 0===e)return void(t&&t(new i.SDKError("Required parameter 'queryId' missing.")));var n={},o={},s={},a=[],u=["application/json"];return this.request({url:"/v3/device-queries/{query_id}/".replace("{query_id}",String(e)),method:"DELETE",headers:n,query:o,formParams:s,useFormData:!1,contentTypes:a,acceptTypes:u,requestOptions:r},t)},t.prototype.deviceQueryList=function(e,t,r,n,o,i,s){var a={},u={};void 0!==e&&(u.limit=e),void 0!==t&&(u.order=t),void 0!==r&&(u.after=r),void 0!==n&&(u.filter=n),void 0!==o&&(u.include=o);var c={},l=[],p=["application/json"];return this.request({url:"/v3/device-queries/",method:"GET",headers:a,query:u,formParams:c,useFormData:!1,contentTypes:l,acceptTypes:p,requestOptions:s},i)},t.prototype.deviceQueryRetrieve=function(e,t,r){if(null===e||void 0===e)return void(t&&t(new i.SDKError("Required parameter 'queryId' missing.")));var n={},o={},s={},a=[],u=["application/json"];return this.request({url:"/v3/device-queries/{query_id}/".replace("{query_id}",String(e)),method:"GET",headers:n,query:o,formParams:s,useFormData:!1,contentTypes:a,acceptTypes:u,requestOptions:r},t)},t.prototype.deviceQueryUpdate=function(e,t,r,n){if(null===e||void 0===e)return void(r&&r(new i.SDKError("Required parameter 'queryId' missing.")));if(null===t||void 0===t)return void(r&&r(new i.SDKError("Required parameter 'body' missing.")));var o={},s={},a={},u=[],c=["application/json"];return this.request({url:"/v3/device-queries/{query_id}/".replace("{query_id}",String(e)),method:"PUT",headers:o,query:s,formParams:a,useFormData:!1,contentTypes:u,acceptTypes:c,requestOptions:n,body:t},r)},t.prototype.deviceRetrieve=function(e,t,r){if(null===e||void 0===e)return void(t&&t(new i.SDKError("Required parameter 'id' missing.")));var n={},o={},s={},a=[],u=["application/json"];return this.request({url:"/v3/devices/{id}/".replace("{id}",String(e)),method:"GET",headers:n,query:o,formParams:s,useFormData:!1,contentTypes:a,acceptTypes:u,requestOptions:r},t)},t.prototype.deviceUpdate=function(e,t,r,n){if(null===e||void 0===e)return void(r&&r(new i.SDKError("Required parameter 'id' missing.")));if(null===t||void 0===t)return void(r&&r(new i.SDKError("Required parameter 'device' missing.")));var o={},s={},a={},u=[],c=["application/json"];return this.request({url:"/v3/devices/{id}/".replace("{id}",String(e)),method:"PUT",headers:o,query:s,formParams:a,useFormData:!1,contentTypes:u,acceptTypes:c,requestOptions:n,body:t},r)},t}(o.ApiBase);r.DefaultApi=s},{"../common/apiBase":6,"../common/sdkError":13}],4:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../common/apiBase"),i=e("../common/sdkError"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.createAsyncRequest=function(e,t,r,n,o){if(null===e||void 0===e)return void(n&&n(new i.SDKError("Required parameter 'deviceId' missing.")));if(null===t||void 0===t)return void(n&&n(new i.SDKError("Required parameter 'asyncId' missing.")));if(null===r||void 0===r)return void(n&&n(new i.SDKError("Required parameter 'body' missing.")));var s={},a={};void 0!==t&&(a["async-id"]=t);var u={},c=["application/json"],l=["application/json"];return this.request({url:"/v2/device-requests/{device-id}".replace("{device-id}",String(e)),method:"POST",headers:s,query:a,formParams:u,useFormData:!1,contentTypes:c,acceptTypes:l,requestOptions:o,body:r},n)},t}(o.ApiBase);r.DeviceRequestsApi=s;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getConnectedEndpoints=function(e,t,r){var n={},o={};void 0!==e&&(o.type=e);var i={},s=[],a=["application/json"];return this.request({url:"/v2/endpoints",method:"GET",headers:n,query:o,formParams:i,useFormData:!1,contentTypes:s,acceptTypes:a,requestOptions:r},t)},t.prototype.getEndpointResources=function(e,t,r){if(null===e||void 0===e)return void(t&&t(new i.SDKError("Required parameter 'deviceId' missing.")));var n={},o={},s={},a=[],u=["application/json"];return this.request({url:"/v2/endpoints/{device-id}".replace("{device-id}",String(e)),method:"GET",headers:n,query:o,formParams:s,useFormData:!1,contentTypes:a,acceptTypes:u,requestOptions:r},t)},t}(o.ApiBase);r.EndpointsApi=a;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.connectWebsocket=function(e,t,r,n,o){if(null===e||void 0===e)return void(n&&n(new i.SDKError("Required parameter 'connection' missing.")));if(null===t||void 0===t)return void(n&&n(new i.SDKError("Required parameter 'upgrade' missing.")));if(null===r||void 0===r)return void(n&&n(new i.SDKError("Required parameter 'secWebSocketProtocol' missing.")));var s={};void 0!==e&&(s.Connection=e),void 0!==t&&(s.Upgrade=t),void 0!==r&&(s["Sec-WebSocket-Protocol"]=r);var a={},u={},c=[],l=[];return this.request({url:"/v2/notification/websocket-connect",method:"GET",headers:s,query:a,formParams:u,useFormData:!1,contentTypes:c,acceptTypes:l,requestOptions:o},n)},t.prototype.deleteLongPollChannel=function(e,t){var r={},n={},o={},i=[],s=[];return this.request({url:"/v2/notification/pull",method:"DELETE",headers:r,query:n,formParams:o,useFormData:!1,contentTypes:i,acceptTypes:s,requestOptions:t},e)},t.prototype.deleteWebsocket=function(e,t){var r={},n={},o={},i=[],s=[];return this.request({url:"/v2/notification/websocket",method:"DELETE",headers:r,query:n,formParams:o,useFormData:!1,contentTypes:i,acceptTypes:s,requestOptions:t},e)},t.prototype.deregisterWebhook=function(e,t){var r={},n={},o={},i=[],s=[];return this.request({url:"/v2/notification/callback",method:"DELETE",headers:r,query:n,formParams:o,useFormData:!1,contentTypes:i,acceptTypes:s,requestOptions:t},e)},t.prototype.getWebhook=function(e,t){var r={},n={},o={},i=[],s=["application/json"];return this.request({url:"/v2/notification/callback",method:"GET",headers:r,query:n,formParams:o,useFormData:!1,contentTypes:i,acceptTypes:s,requestOptions:t},e)},t.prototype.getWebsocket=function(e,t){var r={},n={},o={},i=[],s=["application/json"];return this.request({url:"/v2/notification/websocket",method:"GET",headers:r,query:n,formParams:o,useFormData:!1,contentTypes:i,acceptTypes:s,requestOptions:t},e)},t.prototype.longPollNotifications=function(e,t){var r={},n={},o={},i=[],s=["application/json"];return this.request({url:"/v2/notification/pull",method:"GET",headers:r,query:n,formParams:o,useFormData:!1,contentTypes:i,acceptTypes:s,requestOptions:t},e)},t.prototype.registerWebhook=function(e,t,r){if(null===e||void 0===e)return void(t&&t(new i.SDKError("Required parameter 'webhook' missing.")));var n={},o={},s={},a=["application/json"],u=[];return this.request({url:"/v2/notification/callback",method:"PUT",headers:n,query:o,formParams:s,useFormData:!1,contentTypes:a,acceptTypes:u,requestOptions:r,body:e},t)},t.prototype.registerWebsocket=function(e,t){var r={},n={},o={},i=["application/json"],s=[];return this.request({url:"/v2/notification/websocket",method:"PUT",headers:r,query:n,formParams:o,useFormData:!1,contentTypes:i,acceptTypes:s,requestOptions:t},e)},t}(o.ApiBase);r.NotificationsApi=u;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.deleteResourcePath=function(e,t,r,n,o){if(null===e||void 0===e)return void(n&&n(new i.SDKError("Required parameter 'deviceId' missing.")));if(null===t||void 0===t)return void(n&&n(new i.SDKError("Required parameter 'resourcePath' missing.")));var s={},a={};void 0!==r&&(a.noResp=r);var u={},c=[],l=[];return this.request({url:"/v2/endpoints/{device-id}/{resourcePath}".replace("{device-id}",String(e)).replace("{resourcePath}",String(t)),method:"DELETE",headers:s,query:a,formParams:u,useFormData:!1,contentTypes:c,acceptTypes:l,requestOptions:o},n)},t.prototype.executeOrCreateResource=function(e,t,r,n,o,s){if(null===e||void 0===e)return void(o&&o(new i.SDKError("Required parameter 'deviceId' missing.")));if(null===t||void 0===t)return void(o&&o(new i.SDKError("Required parameter 'resourcePath' missing.")));var a={},u={};void 0!==n&&(u.noResp=n);var c={},l=["text/plain","application/xml","application/octet-stream","application/exi","application/json","application/link-format","application/senml+json","application/nanoservice-tlv","application/vnd.oma.lwm2m+text","application/vnd.oma.lwm2m+opaq","application/vnd.oma.lwm2m+tlv","application/vnd.oma.lwm2m+json"],p=[];return this.request({url:"/v2/endpoints/{device-id}/{resourcePath}".replace("{device-id}",String(e)).replace("{resourcePath}",String(t)),method:"POST",headers:a,query:u,formParams:c,useFormData:!1,contentTypes:l,acceptTypes:p,requestOptions:s,body:r},o)},t.prototype.getResourceValue=function(e,t,r,n,o,s){if(null===e||void 0===e)return void(o&&o(new i.SDKError("Required parameter 'deviceId' missing.")));if(null===t||void 0===t)return void(o&&o(new i.SDKError("Required parameter 'resourcePath' missing.")));var a={},u={};void 0!==r&&(u.cacheOnly=r),void 0!==n&&(u.noResp=n);var c={},l=[],p=[];return this.request({url:"/v2/endpoints/{device-id}/{resourcePath}".replace("{device-id}",String(e)).replace("{resourcePath}",String(t)),method:"GET",headers:a,query:u,formParams:c,useFormData:!1,contentTypes:l,acceptTypes:p,requestOptions:s},o)},t.prototype.updateResourceValue=function(e,t,r,n,o,s){if(null===e||void 0===e)return void(o&&o(new i.SDKError("Required parameter 'deviceId' missing.")));if(null===t||void 0===t)return void(o&&o(new i.SDKError("Required parameter 'resourcePath' missing.")));if(null===r||void 0===r)return void(o&&o(new i.SDKError("Required parameter 'resourceValue' missing.")));var a={},u={};void 0!==n&&(u.noResp=n);var c={},l=["text/plain","application/xml","application/octet-stream","application/exi","application/json","application/link-format","application/senml+json","application/nanoservice-tlv","application/vnd.oma.lwm2m+text","application/vnd.oma.lwm2m+opaq","application/vnd.oma.lwm2m+tlv","application/vnd.oma.lwm2m+json"],p=[];return this.request({url:"/v2/endpoints/{device-id}/{resourcePath}".replace("{device-id}",String(e)).replace("{resourcePath}",String(t)),method:"PUT",headers:a,query:u,formParams:c,useFormData:!1,contentTypes:l,acceptTypes:p,requestOptions:s,body:r},o)},t}(o.ApiBase);r.ResourcesApi=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.addResourceSubscription=function(e,t,r,n){if(null===e||void 0===e)return void(r&&r(new i.SDKError("Required parameter 'deviceId' missing.")));if(null===t||void 0===t)return void(r&&r(new i.SDKError("Required parameter 'resourcePath' missing.")));var o={},s={},a={},u=[],c=["application/json"];return this.request({url:"/v2/subscriptions/{device-id}/{resourcePath}".replace("{device-id}",String(e)).replace("{resourcePath}",String(t)),method:"PUT",headers:o,query:s,formParams:a,useFormData:!1,contentTypes:u,acceptTypes:c,requestOptions:n},r)},t.prototype.checkResourceSubscription=function(e,t,r,n){if(null===e||void 0===e)return void(r&&r(new i.SDKError("Required parameter 'deviceId' missing.")));if(null===t||void 0===t)return void(r&&r(new i.SDKError("Required parameter 'resourcePath' missing.")));var o={},s={},a={},u=[],c=[];return this.request({url:"/v2/subscriptions/{device-id}/{resourcePath}".replace("{device-id}",String(e)).replace("{resourcePath}",String(t)),method:"GET",headers:o,query:s,formParams:a,useFormData:!1,contentTypes:u,acceptTypes:c,requestOptions:n},r)},t.prototype.deleteEndpointSubscriptions=function(e,t,r){if(null===e||void 0===e)return void(t&&t(new i.SDKError("Required parameter 'deviceId' missing.")));var n={},o={},s={},a=[],u=[];return this.request({url:"/v2/subscriptions/{device-id}".replace("{device-id}",String(e)),method:"DELETE",headers:n,query:o,formParams:s,useFormData:!1,contentTypes:a,acceptTypes:u,requestOptions:r},t)},t.prototype.deletePreSubscriptions=function(e,t){var r={},n={},o={},i=[],s=[];return this.request({url:"/v2/subscriptions",method:"DELETE",headers:r,query:n,formParams:o,useFormData:!1,contentTypes:i,acceptTypes:s,requestOptions:t},e)},t.prototype.deleteResourceSubscription=function(e,t,r,n){if(null===e||void 0===e)return void(r&&r(new i.SDKError("Required parameter 'deviceId' missing.")));if(null===t||void 0===t)return void(r&&r(new i.SDKError("Required parameter 'resourcePath' missing.")));var o={},s={},a={},u=[],c=[];return this.request({url:"/v2/subscriptions/{device-id}/{resourcePath}".replace("{device-id}",String(e)).replace("{resourcePath}",String(t)),method:"DELETE",headers:o,query:s,formParams:a,useFormData:!1,contentTypes:u,acceptTypes:c,requestOptions:n},r)},t.prototype.getEndpointSubscriptions=function(e,t,r){if(null===e||void 0===e)return void(t&&t(new i.SDKError("Required parameter 'deviceId' missing.")));var n={},o={},s={},a=[],u=["text/uri-list"];return this.request({url:"/v2/subscriptions/{device-id}".replace("{device-id}",String(e)),method:"GET",headers:n,query:o,formParams:s,useFormData:!1,contentTypes:a,acceptTypes:u,requestOptions:r},t)},t.prototype.getPreSubscriptions=function(e,t){var r={},n={},o={},i=[],s=["application/json"];return this.request({url:"/v2/subscriptions",method:"GET",headers:r,query:n,formParams:o,useFormData:!1,contentTypes:i,acceptTypes:s,requestOptions:t},e)},t.prototype.updatePreSubscriptions=function(e,t,r){if(null===e||void 0===e)return void(t&&t(new i.SDKError("Required parameter 'presubsription' missing.")));var n={},o={},s={},a=["application/json"],u=["text/plain"];return this.request({url:"/v2/subscriptions",method:"PUT",headers:n,query:o,formParams:s,useFormData:!1,contentTypes:a,acceptTypes:u,requestOptions:r,body:e},t)},t}(o.ApiBase);r.SubscriptionsApi=l},{"../common/apiBase":6,"../common/sdkError":13}],5:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../common/apiBase"),i=e("../common/sdkError"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.v3MetricsGet=function(e,t,r,n,o,s,a,u,c,l){if(null===e||void 0===e)return void(c&&c(new i.SDKError("Required parameter 'include' missing.")));if(null===t||void 0===t)return void(c&&c(new i.SDKError("Required parameter 'interval' missing.")));var p={},f={};void 0!==e&&(f.include=e),void 0!==r&&(f.start=r),void 0!==n&&(f.end=n),void 0!==o&&(f.period=o),void 0!==t&&(f.interval=t),void 0!==s&&(f.limit=s),void 0!==a&&(f.after=a),void 0!==u&&(f.order=u);var g={},d=[],h=["application/json"];return this.request({url:"/v3/metrics",method:"GET",headers:p,query:f,formParams:g,useFormData:!1,contentTypes:d,acceptTypes:h,requestOptions:l},c)},t}(o.ApiBase);r.AccountApi=s;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.v3MetricsGet=function(e,t,r,n,o,s,a,u,c,l){if(null===e||void 0===e)return void(c&&c(new i.SDKError("Required parameter 'include' missing.")));if(null===t||void 0===t)return void(c&&c(new i.SDKError("Required parameter 'interval' missing.")));var p={},f={};void 0!==e&&(f.include=e),void 0!==r&&(f.start=r),void 0!==n&&(f.end=n),void 0!==o&&(f.period=o),void 0!==t&&(f.interval=t),void 0!==s&&(f.limit=s),void 0!==a&&(f.after=a),void 0!==u&&(f.order=u);var g={},d=[],h=["application/json"];return this.request({url:"/v3/metrics",method:"GET",headers:p,query:f,formParams:g,useFormData:!1,contentTypes:d,acceptTypes:h,requestOptions:l},c)},t}(o.ApiBase);r.StatisticsApi=a},{"../common/apiBase":6,"../common/sdkError":13}],6:[function(e,t,r){(function(t,n){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var o=e("superagent"),i=e("dotenv"),s=e("./sdkError"),a=e("../../version"),u=e("./functions"),c=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*))(?:Z|(\+|-)([\d|:]*))?$/,l=/^application\/json(;.*)?$/i,p=/^text\/plain(;.*)?$/i,f=a.Version.isPublished?a.Version.version:a.Version.version+"+dev",g=a.Version.packageName+"-javascript / "+f,d=function(){function r(e,r){if(void 0===r&&(r=null),this.responseHandler=r,this.ENV_API_KEY="MBED_CLOUD_SDK_API_KEY",this.ENV_HOST="MBED_CLOUD_SDK_HOST",e=e||{},i&&"function"==typeof i.config&&i.config(),this.apiKey=e.apiKey||t&&t.env[this.ENV_API_KEY],this.host=e.host||t&&t.env[this.ENV_HOST]||"https://api.us-east-1.mbedcloud.com",!this.apiKey)throw new s.SDKError("no api key provided");"bearer"!==this.apiKey.substr(0,6).toLowerCase()&&(this.apiKey="Bearer "+this.apiKey)}return r.normalizeParams=function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)&&void 0!==e[n]&&null!==e[n]){var o=e[n];this.isFileParam(o)||Array.isArray(o)?t[n]=o:t[n]=r.paramToString(o)}return t},r.isFileParam=function(t){return!!(u.isThisNode()&&e("fs")&&t instanceof e("fs").ReadStream)||("function"==typeof n&&t instanceof n||("function"==typeof Blob&&t instanceof Blob||"function"==typeof File&&t instanceof File))},r.paramToString=function(e){return void 0===e||null===e?"":e instanceof Date?e.toJSON():e.toString()},r.chooseType=function(e,t){if(void 0===t&&(t=null),!e.length)return t;var r=e[0]||t;return e.some(function(e){if(p.test(e))return r=e,!0}),r},r.debugLog=function(e,r){t&&t.env&&"superagent"===t.env.DEBUG&&(t.stdout.write("  [1m[35msuperagent[0m "+e.toUpperCase()+" "),console.log(r))},r.prototype.currentConfig=function(){return{apiKey:this.apiKey,host:this.host}},r.prototype.request=function(e,t){var n=this,i=e.requestOptions||{};i.timeout=i.timeout||6e4,i.method=i.method||e.method,i.query=i.query||r.normalizeParams(e.query),i.headers=i.headers||r.normalizeParams(e.headers),i.acceptHeader=i.acceptHeader||r.chooseType(e.acceptTypes),i.url=i.url||e.url.replace(/([:])?\/+/g,function(e,t){return t?e:"/"});var s=o(i.method,this.host+i.url);s.query(i.query),i.headers.Authorization=this.apiKey,u.isThisNode()&&(i.headers["User-Agent"]=g),s.set(i.headers),s.timeout(i.timeout),i.acceptHeader&&s.accept(i.acceptHeader);var a=null;if(Object.keys(e.formParams).length>0)if(e.useFormData){var c=r.normalizeParams(e.formParams);for(var p in c)c.hasOwnProperty(p)&&(r.isFileParam(c[p])?s.attach(p,c[p]):s.field(p,c[p]))}else i.contentType=i.contentType||"application/x-www-form-urlencoded",s.type(i.contentType),s.send(r.normalizeParams(e.formParams));else e.body&&(a=e.body,i.contentType=i.contentType||r.chooseType(e.contentTypes,"application/json"),s.type(i.contentType),a&&a.constructor==={}.constructor&&l.test(i.contentType)&&(a=Object.keys(a).reduce(function(e,t){return null!==a[t]&&void 0!==a[t]&&(e[t]=a[t]),e},{})),s.send(a));return a&&r.debugLog("body",a),s.end(function(e,r){n.complete(e,r,i.acceptHeader,t)}),s},r.prototype.complete=function(e,t,r,n){var o=null;if(e){var i=e.message,a=e,u="";t&&(t.error&&(i=t.error.message),t.body&&t.body.message&&(i=t.body.message,i.error&&(i=i.error)),a=t.error||e,u=t.body||t.text),o=new s.SDKError(i,a,u,e.status)}if(this.responseHandler&&this.responseHandler(o,t),n){var p=null;t&&!o&&(p=t.body||t.text),p&&p.constructor==={}.constructor&&l.test(r)&&(p=JSON.parse(JSON.stringify(p),function(e,t){return c.test(t)?new Date(t):t})),n(o,p)}},r}();r.ApiBase=d}).call(this,e("_process"),e("buffer").Buffer)},{"../../version":41,"./functions":9,"./sdkError":13,_process:46,buffer:42,dotenv:42,fs:42,superagent:60}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t,r,n,o){this.statusCode=e,this.errorMessage=t,r&&(this.headers=r,this.date=r.date?new Date(r.date):new Date,this.requestId=r["x-request-id"]),n&&(this.object=n.object,this.etag=n.etag),o&&(this.method=o.method,this.url=o.url)}return e}();r.ApiMetadata=n},{}],8:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=e("./apiMetadata"),o=function(){function e(){}return e.prototype.responseHandler=function(e,t){var r=null,o=null,i=null,s=null,a=null;e&&(r=e.code,o=e.message,a=e.innerError),t&&(r=t.statusCode,i=t.headers,s=t.body||t.text,a=t.request||t.req),this.lastMeta=new n.ApiMetadata(r,o,i,s,a)},e.prototype.getLastMeta=function(){return this.lastMeta},e}();r.EndpointsBase=o},{"./apiMetadata":7}],9:[function(e,t,r){(function(t){"use strict";function n(e,t){if(!t)return new Promise(function(t,r){try{e(function(e,n){e?r(e):t(n)})}catch(e){r(new _.SDKError(e.message,e))}});try{e(t)}catch(e){t(new _.SDKError(e.message,e))}}function o(e,t,r){if(!r){return v(t,new Promise(function(t,r){try{e(function(e,n){e?r(e):t(n)})}catch(e){r(new _.SDKError(e.message,e))}}))}try{e(r)}catch(e){r(new _.SDKError(e.message,e))}}function i(e,t,r,i,s){void 0===i&&(i=!1);var a=function(r){try{e(function(e,n){if(e)return i||404!==e.code?r(e):r(null,null);if(!t)return r(null,n);try{t(n,r)}catch(e){r(new _.SDKError(e.message,e))}})}catch(e){r(new _.SDKError(e.message,e))}};return s?o(a,s,r):n(a,r)}function s(e){if(e)return"function"==typeof btoa?btoa(e):t.from(e).toString("base64")}function a(e,r){var n="";if(n="function"==typeof atob?atob(e):new t(e,"base64").toString("binary"),r&&r.indexOf("tlv")>-1)try{return b.decodeTlv(n)}catch(e){}return isNaN(n)?n:Number(n)}function u(e){return e&&e.length?e.map(l).join(","):null}function c(e){return e.replace(/(\_\w)/g,function(e){return e[1].toUpperCase()})}function l(e){return e.replace(/([A-Z]+?)/g,function(e){return"_"+e.toLowerCase()})}function p(e,t,r,n){if(void 0===r&&(r="$eq"),void 0===n&&(n=null),e&&e[t]){var o=e[t];if(o.constructor!=={}.constructor)return o;switch(r){case"$ne":if(o.$ne)return o.$ne;break;case"$gte":if(o.$gte)return o.$gte;break;case"$lte":if(o.$lte)return o.$lte;break;case"$in":if(o.$in)return o.$in;break;case"$nin":if(o.$nin)return o.$nin;break;default:if(o.$eq)return o.$eq}}return n}function f(e,t,r){function n(e,r,n,o){if(void 0===o&&(o=""),n instanceof Date&&(n=n.toISOString()),"boolean"==typeof n&&(n=n.toString()),o)o=l(o),o+="__";else{var i=t.from.indexOf(e);e=i>-1?t.to[i]:l(e)}var s=r.replace("$","");return"ne"===s&&(s="neq"),"eq"===s&&(s=""),s&&(s="__"+s),""+o+e+s+"="+n}return void 0===t&&(t={from:[],to:[]}),void 0===r&&(r=[]),e?Object.keys(e).map(function(t){return e[t].constructor!=={}.constructor?n(t,"",e[t]):Object.keys(e[t]).map(function(o){return r.indexOf(t)>-1?e[t][o].constructor!=={}.constructor?n(o,"",e[t][o],t):Object.keys(e[t][o]).map(function(r){return n(o,r,e[t][o][r],t)}).join("&"):n(t,o,e[t][o])}).join("&")}).join("&"):""}function g(e,t,r){function n(e){var r=t.to.indexOf(e);return r>-1?t.from[r]:c(e)}function o(e,t,r){t||(t="eq"),"neq"===t&&(t="ne"),t="$"+t,e[t]=r}void 0===t&&(t={from:[],to:[]}),void 0===r&&(r=[]);var i={};return e=decodeURIComponent(e),e.split("&").forEach(function(e){var t=e.match(/^(.+)=(.+)$/);if(t){var s=t[2],a=t[1].split("__"),u=n(a[0]);if(i[u]||(i[u]={}),r.indexOf(u)>-1){var c=a[1];return i[u][c]||(i[u][c]={}),void o(i[u][c],a[2],s)}o(i[u],a[1],s)}}),i}function d(e){return e instanceof Array?e:[e]}function h(e,t){return null!==t&&void 0!==t&&""!==t&&(null===e||void 0===e||""===e||"*"===e||(e.endsWith("*")?t.startsWith(e.slice(0,-1)):e===t))}function y(e){return e=new Date(e),e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)}function m(){return"undefined"==typeof window&&"function"==typeof e}function v(e,t){var r=new Promise(function(t,r){var n=setTimeout(function(){clearTimeout(n),r("Timeout getting async value. Timeout "+e+"ms")},e)});return Promise.race([t,r])}/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var _=e("./sdkError"),b=e("./tlvDecoder");r.asyncStyle=n,r.asyncStyleWithTimeout=o,r.apiWrapper=i,r.encodeBase64=s,r.decodeBase64=a,r.encodeInclude=u,r.snakeToCamel=c,r.camelToSnake=l,r.extractFilter=p,r.encodeFilter=f,r.decodeFilter=g,r.ensureArray=d,r.matchWithWildcard=h,r.dateToBillingMonth=y,r.isThisNode=m,r.promiseTimeout=v}).call(this,e("buffer").Buffer)},{"./sdkError":13,"./tlvDecoder":14,buffer:42}],10:[function(e,t,r){"use strict";/*
 * Pelion Device Management JavaScript SDK
 * Copyright Arm Limited 2018
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(r,"__esModule",{value:!0}),r.generateId=function(){return""+Date.now()+Math.floor(1e4*Math.random())}},{}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.executeForAll=function(e,t){var r=function(n){return e({after:n}).then(function(e){var n=e.data,o=e.hasMore,i=n.map(function(e){var r=e.id;return t(r)});return Promise.all(i).then(function(){return o?r(n[n.length-1].id):null})})};return r()}},{}],12:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t,r){this.after=e.after,this.hasMore=e.has_more||e.hasMore,this.pageSize="limit"in e?e.limit:"pageSize"in e?e.pageSize:void 0,this.order=e.order,this.totalCount=e.total_count||e.totalCount||0,this.continuationMarker=e.continuation_marker||e.continuationMarker;this.limit=this.pageSize,r&&t&&t.length?this.data=e.data.map(function(e){return r(e)})||[]:this.data=t||[]}return e}();r.ListResponse=n},{}],13:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=function(e){function t(t,r,n,o){var i=e.call(this,t)||this;return i.innerError=r,i.details=n,i.code=o,i}return n(t,e),t}(Error);r.SDKError=o},{}],14:[function(e,t,r){"use strict";function n(e){return(e&u)===u?2:1}function o(e){return(e&c)===f.ONE_BYTE?1:(e&c)===f.TWO_BYTE?2:(e&c)===f.TRE_BYTE?3:e&l}function i(e,t,r){if(void 0===t&&(t={}),void 0===r&&(r=""),!e||e.length<1)return t;var s=e[0],u=s&a,l=n(s),g=o(s),d=function(e){return String.fromCharCode(e)},h=function(e,t,r,n){return e+(t<<8*(n.length-r-1))},y=1,m=e.slice(y,y+l).reduce(h,0);y+=l;var v=g;if((s&c)!==f.OTR_BYTE&&(v=e.slice(y,y+g).reduce(h,0),y+=g),u===p.MULT_RESOURCE)i(e.slice(y,y+v),t,r+"/"+m);else{var _=e.slice(y,y+v),b=_.some(function(e){return 0===e}),w=b?_.reduce(h,0):_.map(d).join("");t[r+"/"+m]=w}return y+=v,i(e.slice(y),t,r),t}function s(e){return i(e.split("").map(function(e){return e.charCodeAt(0)}))}/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var a=parseInt("11000000",2),u=parseInt("00100000",2),c=parseInt("00011000",2),l=parseInt("00000111",2),p={OBJECT_INSTAN:parseInt("00000000",2),RESOURCE_INST:parseInt("01000000",2),MULT_RESOURCE:parseInt("10000000",2),RESOURCE_VALU:parseInt("11000000",2)},f={ONE_BYTE:parseInt("00001000",2),TWO_BYTE:parseInt("00010000",2),TRE_BYTE:parseInt("00011000",2),OTR_BYTE:parseInt("00000000",2)};r.decodeTlv=s},{}],15:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__awaiter||function(e,t,r,n){function o(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){e.done?r(e.value):o(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=2&r[0]?i.return:r[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,r[1])).done)return s;switch(i=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){u.label=r[1];break}if(6===r[0]&&u.label<s[1]){u.label=s[1],s=r;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(r);break}s[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(e){r=[6,e],i=0}finally{o=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(r,"__esModule",{value:!0});var s=e("events"),a=e("../common/listResponse"),u=e("../common/functions"),c=e("../common/sdkError"),l=e("./endpoints"),p=e("./models/webhookAdapter"),f=e("./models/presubscriptionAdapter"),g=e("./models/resourceAdapter"),d=e("./models/connectedDevice"),h=e("./models/deviceEventAdapter"),y=e("./models/metricAdapter"),m=e("../deviceDirectory/deviceDirectoryApi"),v=e("../common/idGenerator"),_=e("../common/legacyPaginator"),b=e("../../primary/subscribe/subscribe"),w=e("../../common/logger"),L=e("../../common/utils"),E=function(e){function t(t){var r=e.call(this)||this;return r._asyncFns={},r._notifyFns={},t=t||{},r._config=t,r._instanceId=v.generateId(),r._endpoints=new l.Endpoints(t),r._deviceDirectory=new m.DeviceDirectoryApi(t),r._log=w.loggerFactory("connectApi"+r._instanceId,t.logLevel).getLogger("ConnectApi"),t.handleNotifications&&(t.autostartNotifications=!1,r._deliveryMethod="SERVER_INITIATED"),r.forceClear=!0===t.forceClear,r.autostartNotifications=!0===t.autostartNotifications,!0===r.autostartNotifications&&(r._deliveryMethod="CLIENT_INITIATED"),r.subscribe=new b.Subscribe(r),r}return n(t,e),Object.defineProperty(t.prototype,"deliveryMethod",{get:function(){return this._deliveryMethod},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"instanceId",{get:function(){return this._instanceId},enumerable:!0,configurable:!0}),t.prototype.notify=function(e){var r=this;e&&(this.subscribe.notifyAllNotifications(e),e.notifications&&e.notifications.forEach(function(e){var n=e.payload?u.decodeBase64(e.payload,e.ct):null,o=""+e.ep+e.path,i=r._notifyFns[o];i&&i(n),r.emit(t.EVENT_NOTIFICATION,{id:e.ep,path:e.path,payload:n}),r.subscribe.notifyResourceValues({deviceId:e.ep,path:e.path,payload:n,maxAge:e["max-age"],contentType:e.ct})}),e.registrations&&e.registrations.forEach(function(e){var n=h.DeviceEventAdapter.map(e,r,"registration");r.subscribe.notifyDeviceEvents(n),r.emit(t.EVENT_REGISTRATION,n)}),e["reg-updates"]&&e["reg-updates"].forEach(function(e){var n=h.DeviceEventAdapter.map(e,r,"reregistration");r.subscribe.notifyDeviceEvents(n),r.emit(t.EVENT_REREGISTRATION,n)}),e["de-registrations"]&&e["de-registrations"].forEach(function(e){var n=h.DeviceEventAdapter.mapId(e,"deregistration");r.subscribe.notifyDeviceEvents(n),r.emit(t.EVENT_DEREGISTRATION,e)}),e["registrations-expired"]&&e["registrations-expired"].forEach(function(e){var n=h.DeviceEventAdapter.mapId(e,"expired");r.subscribe.notifyDeviceEvents(n),r.emit(t.EVENT_EXPIRED,e)}),e["async-responses"]&&e["async-responses"].forEach(function(e){var t=e.id,n=r._asyncFns[t];if(n){if(e.status>=400){n(new c.SDKError(e.error||e.status,null,null,e.status),null)}else{var o=e.payload?u.decodeBase64(e.payload,e.ct):null;o?n(null,o):n(null,e)}delete r._asyncFns[t]}}))},t.prototype.startNotifications=function(e,r){var n=this;return e=e||{},"function"==typeof e&&(r=e,e={}),this._deliveryMethod||(this._deliveryMethod="CLIENT_INITIATED"),u.asyncStyle(function(r){return o(n,void 0,void 0,function(){function n(){l(),r(null,null)}var o,s,a,u,l,p=this;return i(this,function(i){switch(i.label){case 0:return"SERVER_INITIATED"===this._deliveryMethod?[2,r(new c.SDKError("cannot call start notifications if delivery method is server initiated"),null)]:(this._log.debug("starting notifications..."),this._pollRequest?(this._log.debug("notifications already started"),[2,r(null,null)]):this.forceClear?[4,this.forceClearWebhook()]:[3,2]);case 1:return i.sent(),[3,4];case 2:return[4,this.getWebhook()];case 3:if(i.sent())return[2,r(new c.SDKError("cannot call start notifications as a webhook already exists"),null)];i.label=4;case 4:return this._pollRequest=!0,o=e.interval,s=e.requestCallback,a=0,u=0,l=function(){p._pollRequest=p._endpoints.notifications.longPollNotifications(function(e,r){if(e)return void(++u<=t.MAXIMUM_NUMBER_OF_RETRIES&&setTimeout(l,t.DELAY_BETWEEN_RETRIES));if(r["async-responses"]){var n=r["async-responses"].filter(function(e){return e.status>=400}),i=n.every(function(e){return e.status>=500});if(n.length>0&&i&&++a<=t.MAXIMUM_NUMBER_OF_RETRIES)return void setTimeout(l,t.DELAY_BETWEEN_RETRIES*a)}p.notify(r),s&&r["async-responses"]&&s(e,r["async-responses"]),a=0,u=0,setTimeout(l,o||500)})},n(),[2]}})})},r)},t.prototype.stopNotifications=function(e){var t=this;return u.asyncStyle(function(e){return o(t,void 0,void 0,function(){var t=this;return i(this,function(r){return"SERVER_INITIATED"===this._deliveryMethod?(this._log.warn("should not call stop notifications if delivery method is server initiated"),[2,e(null,null)]):(this._log.debug("stopping notifications..."),this._pollRequest?(this._log.debug("nothing to stop"),[2,e(null,null)]):(this._endpoints.notifications.deleteLongPollChannel(function(){t._pollRequest&&(t._pollRequest.abort&&t._pollRequest.abort(),t._pollRequest=null),e(null,null)}),[2]))})})},e)},t.prototype.getWebhook=function(e){var t=this;return u.asyncStyle(function(e){L.isJwt(t._config.apiKey)?e(null,null):t._endpoints.notifications.getWebhook(function(t,r){if(t)return 404===t.code?e(null,null):e(t);var n=p.WebhookAdapter.map(r);e(null,n)})},e)},t.prototype.updateWebhook=function(e,t,r,n){var o=this;return t=t||{},r=r||!1,"function"==typeof r&&(n=r,r=!1),"function"==typeof t&&(n=t,t={}),this._deliveryMethod||(this._deliveryMethod="SERVER_INITIATED"),u.asyncStyle(function(n){function i(){this._endpoints.notifications.registerWebhook({url:e,headers:t},function(e){if(e)return n(e);n(null,null)})}if("CLIENT_INITIATED"===o._deliveryMethod)return n(new c.SDKError("cannot update webhook if delivery method is client initiated"),null);o.forceClear||r?o.stopNotifications(i.bind(o)):i.call(o)},n)},t.prototype.deleteWebhook=function(e){var t=this;return u.asyncStyle(function(e){t._endpoints.notifications.deregisterWebhook(function(){e(null,null)})},e)},t.prototype.listPresubscriptions=function(e){var t=this;return u.apiWrapper(function(e){t._endpoints.subscriptions.getPreSubscriptions(e)},function(e,t){t(null,e.map(f.PresubscriptionAdapter.map))},e)},t.prototype.updatePresubscriptions=function(e,t){var r=this;return u.apiWrapper(function(t){var n=e.map(f.PresubscriptionAdapter.reverseMap);r._endpoints.subscriptions.updatePreSubscriptions(n,t)},function(e,t){t(null,e)},t)},t.prototype.deletePresubscriptions=function(e){var t=this;return u.apiWrapper(function(e){t._endpoints.subscriptions.deletePreSubscriptions(e)},function(e,t){t(null,e)},e)},t.prototype.deleteSubscriptions=function(e){var t=this;return u.asyncStyle(function(e){_.executeForAll(t.listConnectedDevices.bind(t),t.deleteDeviceSubscriptions.bind(t)).then(function(){return e(null)},e)},e)},t.prototype.listConnectedDevices=function(e,t){var r=this;return e=e||{},"function"==typeof e&&(t=e,e={}),e.filter=e.filter||{},e.filter.state="registered",u.apiWrapper(function(t){r._deviceDirectory.listDevices(e,t)},function(e,t){var n=e.data.map(function(e){return new d.ConnectedDevice(e,r)});t(null,new a.ListResponse(e,n))},t)},t.prototype.listDeviceSubscriptions=function(e,t){var r=this;return u.apiWrapper(function(t){r._endpoints.subscriptions.getEndpointSubscriptions(e,t)},function(e,t){t(null,e)},t)},t.prototype.deleteDeviceSubscriptions=function(e,t){var r=this;return u.apiWrapper(function(t){r._endpoints.subscriptions.deleteEndpointSubscriptions(e,t)},function(t,n){Object.keys(r._notifyFns).forEach(function(t){0===t.indexOf(e+"/")&&delete r._notifyFns[t]}),n(null,t)},t)},t.prototype.listResources=function(e,t){var r=this;return u.apiWrapper(function(t){r._endpoints.endpoints.getEndpointResources(e,t)},function(t,n){n(null,t.map(function(t){return g.ResourceAdapter.map(t,e,r)}))},t)},t.prototype.getResource=function(e,t,r){var n=this;return t=this.normalizePath(t),u.apiWrapper(function(t){n._endpoints.endpoints.getEndpointResources(e,t)},function(r,o){var i=r.find(function(e){return n.normalizePath(e.uri)===t});if(!i)return o(new c.SDKError("Resource not found"),null);o(null,g.ResourceAdapter.map(i,e,n))},r)},t.prototype.getResourceValue=function(e,t,r,n,s){var a=this;"function"==typeof r&&(s=r,r=null),"function"==typeof n&&(s=n,n=null),t=this.reverseNormalizePath(t);var l=v.generateId();return u.apiWrapper(function(u){return o(a,void 0,void 0,function(){var o,a=this;return i(this,function(i){switch(i.label){case 0:return[4,this.getWebhook()];case 1:return i.sent()&&!this.forceClear?[2,u(new c.SDKError("webhook in use"),null)]:(this._asyncFns[l]=u,s&&setTimeout(function(){a._asyncFns[l]&&(u(new c.SDKError("Timeout getting async value. Timeout "+r+"ms"),null),delete a._asyncFns[l])},r),o=function(e){e&&(delete a._asyncFns[l],u(e,null))},this.autostartNotifications?this.startNotifications(null,function(r){if(r)return o(r);a._endpoints.deviceRequests.createAsyncRequest(e,l,{method:"GET",uri:t,accept:n},o)}):this._endpoints.deviceRequests.createAsyncRequest(e,l,{method:"GET",uri:t,accept:n},o),[2])}})})},null,s,!1,r)},t.prototype.setResourceValue=function(e,t,r,n,s,a){var l=this;"function"==typeof n&&(a=n,n=null),"function"==typeof s&&(a=s,s=null),t=this.reverseNormalizePath(t);var p=v.generateId(),f=u.encodeBase64(r);return u.apiWrapper(function(r){return o(l,void 0,void 0,function(){var o,u=this;return i(this,function(i){switch(i.label){case 0:return[4,this.getWebhook()];case 1:return i.sent()&&!this.forceClear?[2,r(new c.SDKError("webhook in use"),null)]:(this._asyncFns[p]=r,a&&setTimeout(function(){u._asyncFns[p]&&(r(new c.SDKError("Timeout getting async value. Timeout "+n+"ms"),null),delete u._asyncFns[p])},n),o=function(e){if(e)return delete u._asyncFns[p],r(e,null)},this.autostartNotifications?this.startNotifications(null,function(r){if(r)return o(r);u._endpoints.deviceRequests.createAsyncRequest(e,p,{method:"PUT",uri:t,"content-type":s,"payload-b64":f},o)}):this._endpoints.deviceRequests.createAsyncRequest(e,p,{method:"PUT",uri:t,"content-type":s,"payload-b64":f},o),[2])}})})},null,a,!1,n)},t.prototype.executeResource=function(e,t,r,n,s,a,l){var p=this;"function"==typeof r&&(l=r,r=null),"function"==typeof n&&(l=n,n=null),"function"==typeof a&&(l=a,a=null),"function"==typeof s&&(l=s,s=null),t=this.reverseNormalizePath(t);var f=v.generateId();return u.apiWrapper(function(g){return o(p,void 0,void 0,function(){var o,p=this;return i(this,function(i){switch(i.label){case 0:return[4,this.getWebhook()];case 1:return i.sent()&&!this.forceClear?[2,g(new c.SDKError("webhook in use"),null)]:(this._asyncFns[f]=g,l&&setTimeout(function(){p._asyncFns[f]&&(g(new c.SDKError("Timeout getting async value. Timeout "+n+"ms"),null),delete p._asyncFns[f])},n),o=function(e){if(e)return delete p._asyncFns[f],g(e,null)},this.autostartNotifications?this.startNotifications(null,function(n){if(n)return o(n);p._endpoints.deviceRequests.createAsyncRequest(e,f,{method:"POST",uri:t,"content-type":s,accept:a,"payload-b64":u.encodeBase64(r)},o)}):this._endpoints.deviceRequests.createAsyncRequest(e,f,{method:"POST",uri:t,"content-type":s,accept:a,"payload-b64":u.encodeBase64(r)},o),[2])}})})},null,l,!1,n)},t.prototype.getResourceSubscription=function(e,t,r){var n=this;return t=this.normalizePath(t),u.asyncStyle(function(r){n._endpoints.subscriptions.checkResourceSubscription(e,t,function(e){return r(null,!e)})},r)},t.prototype.addResourceSubscription=function(e,t,r,n){var o=this;return t=this.normalizePath(t),u.apiWrapper(function(r){o.startNotifications(null,function(n){if(n)return r(n,null);o._endpoints.subscriptions.addResourceSubscription(e,t,r)})},function(n,i){r&&(o._notifyFns[e+"/"+t]=r),o.handleAsync(n,i)},n)},t.prototype.deleteResourceSubscription=function(e,t,r){var n=this;return t=this.normalizePath(t),u.apiWrapper(function(r){n.startNotifications(null,function(o){if(o)return r(o,null);n._endpoints.subscriptions.deleteResourceSubscription(e,t,r)})},function(r,o){delete n._notifyFns[e+"/"+t],o(null,null)},r)},t.prototype.listMetrics=function(e,t){var r=this;return u.apiWrapper(function(t){var n=e,o=n.limit,i=n.after,s=n.order,a=n.include,u=n.interval,c=null,l=null,p=null;!function(e){return void 0!==e.period}(e)?(c=e.start,l=e.end):p=y.MetricAdapter.mapTimePeriod(e.period),r._endpoints.statistics.v3MetricsGet(y.MetricAdapter.mapIncludes(a),y.MetricAdapter.mapTimePeriod(u),c,l,p,o,i,s,t)},function(e,t){var r=[];e.data&&e.data.length&&(r=e.data.map(function(e){return y.MetricAdapter.map(e)})),t(null,new a.ListResponse(e,r))},t)},t.prototype.getLastApiMetadata=function(e){var t=this;return u.asyncStyle(function(e){e(null,t._endpoints.getLastMeta())},e)},t.prototype.normalizePath=function(e){return e&&"/"===e.charAt(0)?e.substr(1):e},t.prototype.reverseNormalizePath=function(e){return e&&"/"!==e.charAt(0)?"/"+e:e},t.prototype.handleAsync=function(e,r){if(e&&e[t.ASYNC_KEY])return void(this._asyncFns[e[t.ASYNC_KEY]]=r);r(null,e)},t.prototype.forceClearWebhook=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this._log.warn("deleting any existing webhook connection"),[4,this.deleteWebhook()];case 1:return e.sent(),[2]}})})},t.EVENT_NOTIFICATION="notification",t.EVENT_REGISTRATION="registration",t.EVENT_REREGISTRATION="reregistration",t.EVENT_DEREGISTRATION="deregistration",t.EVENT_EXPIRED="expired",t.ASYNC_KEY="async-response-id",t.DELAY_BETWEEN_RETRIES=1e3,t.MAXIMUM_NUMBER_OF_RETRIES=3,t}(s.EventEmitter);r.ConnectApi=E},{"../../common/logger":1,"../../common/utils":2,"../../primary/subscribe/subscribe":40,"../common/functions":9,"../common/idGenerator":10,"../common/legacyPaginator":11,"../common/listResponse":12,"../common/sdkError":13,"../deviceDirectory/deviceDirectoryApi":27,"./endpoints":16,"./models/connectedDevice":18,"./models/deviceEventAdapter":19,"./models/metricAdapter":21,"./models/presubscriptionAdapter":22,"./models/resourceAdapter":24,"./models/webhookAdapter":26,events:45}],16:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../_api/statistics"),i=e("../common/endpointsBase"),s=e("../_api/mds"),a=function(e){function t(t){var r=e.call(this)||this;return r.endpoints=new s.EndpointsApi(t,r.responseHandler.bind(r)),r.deviceRequests=new s.DeviceRequestsApi(t,r.responseHandler.bind(r)),r.notifications=new s.NotificationsApi(t,r.responseHandler.bind(r)),r.resources=new s.ResourcesApi(t,r.responseHandler.bind(r)),r.subscriptions=new s.SubscriptionsApi(t,r.responseHandler.bind(r)),r.account=new o.AccountApi(t,r.responseHandler.bind(r)),r.statistics=new o.StatisticsApi(t,r.responseHandler.bind(r)),r}return n(t,e),t}(i.EndpointsBase);r.Endpoints=a},{"../_api/mds":4,"../_api/statistics":5,"../common/endpointsBase":8}],17:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=e("./connectApi");r.default=n.ConnectApi},{"./connectApi":15}],18:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../../common/functions"),i=e("../../deviceDirectory/models/device"),s=function(e){function t(t,r){var n=e.call(this)||this;n._connectApi=r;for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);return n}return n(t,e),t.prototype.listResources=function(e){var t=this;return o.asyncStyle(function(e){t._connectApi.listResources(t.id,e)},e)},t.prototype.getResource=function(e,t){var r=this;return o.asyncStyle(function(t){r._connectApi.getResource(r.id,e,t)},t)},t.prototype.listSubscriptions=function(e){var t=this;return o.asyncStyle(function(e){t._connectApi.listDeviceSubscriptions(t.id,e)},e)},t.prototype.deleteSubscriptions=function(e){var t=this;return o.asyncStyle(function(e){t._connectApi.deleteDeviceSubscriptions(t.id,e)},e)},t.prototype.getResourceValue=function(e,t,r,n){var i=this;return"function"==typeof t&&(n=t,t=null),"function"==typeof r&&(n=r,r=null),o.asyncStyle(function(n){i._connectApi.getResourceValue(i.id,e,t,r,n)},n)},t.prototype.setResourceValue=function(e,t,r,n,i){var s=this;return"function"==typeof r&&(i=r,r=null),"function"==typeof n&&(i=n,n=null),o.asyncStyle(function(o){s._connectApi.setResourceValue(s.id,e,t,r,n,o)},i)},t.prototype.executeResource=function(e,t,r,n,i,s){var a=this;return"function"==typeof t&&(s=t,t=null),"function"==typeof r&&(s=r,r=null),"function"==typeof i&&(s=i,i=null),"function"==typeof n&&(s=n,n=null),o.asyncStyle(function(o){a._connectApi.executeResource(a.id,e,r,n,i,t,o)},s)},t.prototype.getResourceSubscription=function(e,t){var r=this;return o.asyncStyle(function(t){r._connectApi.getResourceSubscription(r.id,e,t)},t)},t.prototype.addResourceSubscription=function(e,t,r){var n=this;return o.asyncStyle(function(r){n._connectApi.addResourceSubscription(n.id,e,t,r)},r)},t.prototype.deleteResourceSubscription=function(e,t){var r=this;return o.asyncStyle(function(t){r._connectApi.deleteResourceSubscription(r.id,e,t)},t)},t}(i.Device);r.ConnectedDevice=s},{"../../common/functions":9,"../../deviceDirectory/models/device":30}],19:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=e("./resource"),o=function(){function e(){}return e.mapResource=function(e,t,r){return new n.Resource({contentType:e.ct,observable:e.obs,type:e.rt,path:e.path,deviceId:t},r)},e.map=function(t,r,n){var o=[];return t&&t.resources&&(o=t.resources.map(function(n){return e.mapResource(n,t.ep,r)})),{id:t.ep,type:t.ept,queueMode:t.q,resources:o,event:n}},e.mapId=function(e,t){return{id:e,event:t}},e}();r.DeviceEventAdapter=o},{"./resource":23}],20:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}return e}();r.Metric=n},{}],21:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=e("./metric"),o=function(){function e(){}return e.map=function(e){return new n.Metric({id:e.id,timestamp:e.timestamp,handshakes:e.handshakes_successful,transactions:e.transactions,observations:e.device_observations,successfulApiCalls:e.connect_rest_api_success,failedApiCalls:e.connect_rest_api_error,successfulProxyRequests:e.device_proxy_request_success,failedProxyRequests:e.device_proxy_request_error,successfulSubscriptionRequests:e.device_subscription_request_success,failedSubscriptionRequests:e.device_subscription_request_error,successfulBootstraps:e.bootstraps_successful,failedBootstraps:e.bootstraps_failed,pendingBootstraps:e.bootstraps_pending,fullRegistrations:e.full_registrations,updatedRegistrations:e.registration_updates,expiredRegistrations:e.expired_registrations,deletedRegistrations:e.deleted_registrations})},e.mapIncludes=function(e){var t=[],r=["handshakes","transactions","observations","successfulApiCalls","failedApiCalls","successfulProxyRequests","failedProxyRequests","successfulSubscriptionRequests","failedSubscriptionRequests","successfulBootstraps","failedBootstraps","pendingBootstraps","fullRegistrations","updatedRegistrations","expiredRegistrations","deletedRegistrations"],n=["handshakes_successful","transactions","device_observations","connect_rest_api_success","connect_rest_api_error","device_proxy_request_success","device_proxy_request_error","device_subscription_request_success","device_subscription_request_error","bootstraps_successful","bootstraps_failed","bootstraps_pending","full_registrations","registration_updates","expired_registrations","deleted_registrations"];return e&&e.forEach(function(e){var o=r.indexOf(e);o>=0&&t.push(n[o])}),0===t.length&&(t=n),t.join(",")},e.mapTimePeriod=function(t){if(!t)return e.DEFAULT_TIME_PERIOD;var r=t.unit[0];return""+t.duration+r},e.DEFAULT_TIME_PERIOD="1d",e}();r.MetricAdapter=o},{"./metric":20}],22:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(){}return e.map=function(e){return{deviceId:e["endpoint-name"],deviceType:e["endpoint-type"],resourcePaths:e["resource-path"]}},e.reverseMap=function(e){return{"endpoint-name":e.deviceId,"endpoint-type":e.deviceType,"resource-path":e.resourcePaths}},e}();r.PresubscriptionAdapter=n},{}],23:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("events"),i=e("../../common/functions"),s=function(e){function t(r,n){var o=e.call(this)||this;o._api=n;for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i]);return o.on("newListener",function(e){e===t.EVENT_NOTIFICATION&&o.addSubscription(function(e){return o.emit(t.EVENT_NOTIFICATION,e)})}),o.on("removeListener",function(e){e===t.EVENT_NOTIFICATION&&0===o.listenerCount(t.EVENT_NOTIFICATION)&&o.deleteSubscription()}),o}return n(t,e),t.prototype.addSubscription=function(e,t){var r=this;return i.asyncStyle(function(t){if(!r.observable)return t(null,null);r._api.addResourceSubscription(r.deviceId,r.path,e,t)},t)},t.prototype.deleteSubscription=function(e){var t=this;return i.asyncStyle(function(e){t._api.deleteResourceSubscription(t.deviceId,t.path,e)},e)},t.prototype.getValue=function(e,t,r){var n=this;return"function"==typeof e&&(r=e,e=null),"function"==typeof t&&(r=t,t=null),i.asyncStyle(function(r){n._api.getResourceValue(n.deviceId,n.path,e,t,r)},r)},t.prototype.setValue=function(e,t,r,n){var o=this;return"function"==typeof t&&(n=t,t=null),"function"==typeof r&&(n=r,r=null),i.asyncStyle(function(n){o._api.setResourceValue(o.deviceId,o.path,e,t,r,n)},n)},t.prototype.execute=function(e,t,r,n,o){var s=this;return"function"==typeof e&&(o=e,e=null),"function"==typeof t&&(o=t,t=null),"function"==typeof n&&(o=n,n=null),"function"==typeof r&&(o=r,r=null),i.asyncStyle(function(o){s._api.executeResource(s.deviceId,s.path,t,r,n,e,o)},o)},t.prototype.getSubscription=function(e){var t=this;return i.asyncStyle(function(e){if(!t.observable)return e(null,!1);t._api.getResourceSubscription(t.deviceId,t.path,e)},e)},t.EVENT_NOTIFICATION="notification",t}(o.EventEmitter);r.Resource=s},{"../../common/functions":9,events:45}],24:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=e("./resource"),o=function(){function e(){}return e.map=function(e,t,r){return new n.Resource({contentType:e.type,observable:e.obs,type:e.rt,path:e.uri,deviceId:t},r)},e}();r.ResourceAdapter=o},{"./resource":23}],25:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}return e}();r.Webhook=n},{}],26:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=e("./webhook"),o=function(){function e(){}return e.map=function(e){return new n.Webhook({url:e.url,headers:e.headers})},e}();r.WebhookAdapter=o},{"./webhook":25}],27:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=e("../common/functions"),o=e("../common/listResponse"),i=e("./models/deviceAdapter"),s=e("./models/queryAdapter"),a=e("./models/deviceEventAdapter"),u=e("./endpoints"),c=e("./filters"),l=function(){function e(e){this._endpoints=new u.Endpoints(e)}return e.prototype.listDevices=function(e,t){var r=this;return e=e||{},"function"==typeof e&&(t=e,e={}),n.apiWrapper(function(t){var o=e.limit,i=e.after,s=e.order,a=e.include,u=e.filter;r._endpoints.directory.deviceList(o,s,i,n.encodeFilter(u,c.Filters.DEVICE_FILTER_MAP,c.Filters.NESTED_FILTERS),n.encodeInclude(a),t)},function(e,t){var n=e.data.map(function(e){return i.DeviceAdapter.map(e,r)});t(null,new o.ListResponse(e,n))},t)},e.prototype.getDevice=function(e,t){var r=this;return n.apiWrapper(function(t){r._endpoints.directory.deviceRetrieve(e,t)},function(e,t){t(null,i.DeviceAdapter.map(e,r))},t)},e.prototype.addDevice=function(e,t){var r=this;return n.apiWrapper(function(t){r._endpoints.directory.deviceCreate(i.DeviceAdapter.addMap(e),t)},function(e,t){t(null,i.DeviceAdapter.map(e,r))},t)},e.prototype.updateDevice=function(e,t){var r=this;return n.apiWrapper(function(t){r._endpoints.directory.deviceUpdate(e.id,i.DeviceAdapter.updateMap(e),t)},function(e,t){t(null,i.DeviceAdapter.map(e,r))},t)},e.prototype.deleteDevice=function(e,t){var r=this;return n.apiWrapper(function(t){r._endpoints.directory.deviceDestroy(e,t)},function(e,t){t(null,e)},t)},e.prototype.listQueries=function(e,t){var r=this;return e=e||{},"function"==typeof e&&(t=e,e={}),n.apiWrapper(function(t){var o=e.limit,i=e.order,s=e.after,a=e.include,u=e.filter;r._endpoints.directory.deviceQueryList(o,i,s,n.encodeFilter(u,c.Filters.EMPTY_FILTER_MAP),n.encodeInclude(a),t)},function(e,t){var n;e.data&&e.data.length&&(n=e.data.map(function(e){return s.QueryAdapter.map(e,r)})),t(null,new o.ListResponse(e,n))},t)},e.prototype.getQuery=function(e,t){var r=this;return n.apiWrapper(function(t){r._endpoints.directory.deviceQueryRetrieve(e,t)},function(e,t){t(null,s.QueryAdapter.map(e,r))},t)},e.prototype.addQuery=function(e,t){var r=this;return n.apiWrapper(function(t){r._endpoints.directory.deviceQueryCreate(s.QueryAdapter.addMap(e),t)},function(e,t){t(null,s.QueryAdapter.map(e,r))},t)},e.prototype.updateQuery=function(e,t){var r=this;return n.apiWrapper(function(t){r._endpoints.directory.deviceQueryUpdate(e.id,s.QueryAdapter.updateMap(e),t)},function(e,t){t(null,s.QueryAdapter.map(e,r))},t)},e.prototype.deleteQuery=function(e,t){var r=this;return n.apiWrapper(function(t){r._endpoints.directory.deviceQueryDestroy(e,t)},function(e,t){t(null,e)},t)},e.prototype.listDeviceEvents=function(e,t){var r=this;return e=e||{},"function"==typeof e&&(t=e,e={}),n.apiWrapper(function(t){var o=e,i=o.limit,s=o.order,a=o.after,u=o.include,l=o.filter;r._endpoints.directory.deviceLogList(i,s,a,n.encodeFilter(l,c.Filters.DEVICE_EVENT_FILTER_MAP),n.encodeInclude(u),t)},function(e,t){var r;e.data&&e.data.length&&(r=e.data.map(function(e){return a.DeviceEventAdapter.map(e)})),t(null,new o.ListResponse(e,r))},t)},e.prototype.getDeviceEvent=function(e,t){var r=this;return n.apiWrapper(function(t){r._endpoints.directory.deviceLogRetrieve(e,t)},function(e,t){t(null,a.DeviceEventAdapter.map(e))},t)},e.prototype.getLastApiMetadata=function(e){var t=this;return n.asyncStyle(function(e){e(null,t._endpoints.getLastMeta())},e)},e}();r.DeviceDirectoryApi=l},{"../common/functions":9,"../common/listResponse":12,"./endpoints":28,"./filters":29,"./models/deviceAdapter":31,"./models/deviceEventAdapter":33,"./models/queryAdapter":35}],28:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../_api/device_directory"),i=e("../common/endpointsBase"),s=function(e){function t(t){var r=e.call(this)||this;return r.directory=new o.DefaultApi(t,r.responseHandler.bind(r)),r}return n(t,e),t}(i.EndpointsBase);r.Endpoints=s},{"../_api/device_directory":3,"../common/endpointsBase":8}],29:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(){}return e.NESTED_FILTERS=["customAttributes"],e.DEVICE_FILTER_MAP={from:["alias","bootstrapCertificateExpiration","certificateFingerprint","certificateIssuerId","connectorCertificateExpiration","deviceType"],to:["endpoint_name","bootstrap_expiration_date","device_key","ca_id","connector_expiration_date","endpoint_type"]},e.DEVICE_EVENT_FILTER_MAP={from:["eventDate","type"],to:["date_time","event_type"]},e.EMPTY_FILTER_MAP={from:[],to:[]},e}();r.Filters=n},{}],30:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../common/functions"),o=function(){function e(e,t){this._api=t;for(var r in e)e.hasOwnProperty(r)&&(this[r]=e[r])}return e.prototype.update=function(e){var t=this;return n.asyncStyle(function(e){t._api.updateDevice(t,e)},e)},e.prototype.delete=function(e){var t=this;return n.asyncStyle(function(e){t._api.deleteDevice(t.id,e)},e)},e}();r.Device=o},{"../../common/functions":9}],31:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=e("./device"),o=function(){function e(){}return e.map=function(e,t){return new n.Device({accountId:e.account_id,bootstrappedTimestamp:e.bootstrapped_timestamp,createdAt:e.created_at,customAttributes:e.custom_attributes,description:e.description,deviceClass:e.device_class,id:e.id,mechanism:e.mechanism,mechanismUrl:e.mechanism_url,name:e.name,serialNumber:e.serial_number,state:e.state,updatedAt:e.updated_at,vendorId:e.vendor_id,alias:e.endpoint_name,bootstrapCertificateExpiration:e.bootstrap_expiration_date,certificateFingerprint:e.device_key,certificateIssuerId:e.ca_id,connectorCertificateExpiration:e.connector_expiration_date,deviceExecutionMode:e.device_execution_mode,firmwareChecksum:e.firmware_checksum,manifestTimestamp:e.manifest_timestamp,hostGateway:e.host_gateway,deviceType:e.endpoint_type,claimedAt:e.enrolment_list_timestamp},t)},e.addMap=function(e){return{name:e.name,vendor_id:e.vendorId,custom_attributes:e.customAttributes,mechanism:e.mechanism,device_class:e.deviceClass,mechanism_url:e.mechanismUrl,serial_number:e.serialNumber,description:e.description,bootstrap_expiration_date:e.bootstrapCertificateExpiration,bootstrapped_timestamp:e.bootstrappedTimestamp,ca_id:e.certificateIssuerId,connector_expiration_date:e.connectorCertificateExpiration,device_execution_mode:e.deviceExecutionMode,device_key:e.certificateFingerprint,endpoint_name:e.alias,firmware_checksum:e.firmwareChecksum,state:e.state,host_gateway:e.hostGateway,endpoint_type:e.deviceType}},e.updateMap=function(e){return{name:e.name,custom_attributes:e.customAttributes,description:e.description,ca_id:e.certificateIssuerId,device_key:e.certificateFingerprint,endpoint_name:e.alias,host_gateway:e.hostGateway,endpoint_type:e.deviceType}},e}();r.DeviceAdapter=o},{"./device":30}],32:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}return e}();r.DeviceEvent=n},{}],33:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=e("./deviceEvent"),o=function(){function e(){}return e.map=function(e){return new n.DeviceEvent({id:e.id,eventDate:e.date_time,stateChanged:e.state_change,description:e.description,changes:e.changes,typeDescription:e.event_type_description,type:e.event_type,data:e.data,deviceId:e.device_id})},e}();r.DeviceEventAdapter=o},{"./deviceEvent":32}],34:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../common/functions"),o=function(){function e(e,t){this._api=t;for(var r in e)e.hasOwnProperty(r)&&(this[r]=e[r])}return e.prototype.update=function(e){var t=this;return n.asyncStyle(function(e){t._api.updateQuery(t,e)},e)},e.prototype.delete=function(e){var t=this;return n.asyncStyle(function(e){t._api.deleteQuery(t.id,e)},e)},e}();r.Query=o},{"../../common/functions":9}],35:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../common/functions"),o=e("../filters"),i=e("./query"),s=function(){function e(){}return e.map=function(e,t){return new i.Query({filter:n.decodeFilter(e.query,o.Filters.DEVICE_FILTER_MAP,o.Filters.NESTED_FILTERS),createdAt:e.created_at,id:e.id,name:e.name,updatedAt:e.updated_at},t)},e.addMap=function(e){return{name:e.name,query:n.encodeFilter(e.filter,o.Filters.DEVICE_FILTER_MAP,o.Filters.NESTED_FILTERS)||null}},e.updateMap=function(e){return{name:e.name,query:n.encodeFilter(e.filter,o.Filters.DEVICE_FILTER_MAP,o.Filters.NESTED_FILTERS)||null}},e}();r.QueryAdapter=s},{"../../common/functions":9,"../filters":29,"./query":34}],36:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("./observer"),i=e("../../../legacy/common/functions"),s=function(e){function t(t){var r=e.call(this)||this;return t&&(r.filter=t),r}return n(t,e),t.prototype.filterFunc=function(e){if(this.filter)for(var t in this.filter)if(-1===i.ensureArray(this.filter[t]).indexOf(e[t]))return!1;return!0},t.prototype.notify=function(t){this.subscribed&&this.filterFunc(t)&&e.prototype.notify.call(this,t)},t.prototype.unsubscribe=function(){this.subscribed=!1,e.prototype.clearListeners.call(this)},t}(o.Observer);r.DeviceStateObserver=s},{"../../../legacy/common/functions":9,"./observer":38}],37:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var o=e("./observer"),i=function(e){function t(){return e.call(this)||this}return n(t,e),t.prototype.unsubscribe=function(){e.prototype.clearListeners.call(this)},t}(o.Observer);r.MasterObserver=i},{"./observer":38}],38:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(){this.subscribed=!0,this.notificationQueue=new Array,this.callbacks=new Array,this.waiting=new Array,this.filters=new Array}return e.prototype.notify=function(e){this.runLocalFilter(e)&&(this._notifyCallbacks(e),this.waiting.length>0?this.waiting.shift()(e):this.notificationQueue.push(e))},e.prototype.once=function(e){var t=this;if(this.notificationQueue.length>0){var r=this.notificationQueue.shift();if(!e)return new Promise(function(e,t){e(r)});e(r)}else{if(!e){return new Promise(function(e,r){var n=function(t){e(t)};t.waiting.push(n)})}this.waiting.push(e)}},e.prototype.addListener=function(e){return this.callbacks.push(e),this},e.prototype.removeListener=function(e){var t=this.callbacks.indexOf(e,0);return t>-1&&this.callbacks.splice(t,1),this},e.prototype.clearListeners=function(){return this.callbacks=new Array,this},e.prototype.listeners=function(){return this.callbacks},e.prototype.getNotificationQueue=function(){return this.notificationQueue},e.prototype.addLocalFilter=function(e){return this.filters.push(e),this},e.prototype.runLocalFilter=function(e){return!(this.filters.length>0)||this.filters.some(function(t){return t(e)})},e.prototype._notifyCallbacks=function(e){this.callbacks.forEach(function(t){return t(e)})},e}();r.Observer=n},{}],39:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var o=e("./observer"),i=e("../../../legacy/common/functions"),s=function(e){function t(t,r,n){void 0===n&&(n="OnValueUpdate");var o=e.call(this)||this;return o.firstValue=n,o.localPresubscriptions=new Array,r&&(o.connect=r),t&&(o.filter=t,i.ensureArray(o.filter.deviceId).forEach(function(e){o.localPresubscriptions.push({deviceId:e,resourcePaths:o.filter.resourcePaths||new Array})}),o.syncPresubscriptions()),o}return n(t,e),t.prototype.notify=function(t){this.subscribed&&(0===this.localPresubscriptions.length&&e.prototype.notify.call(this,t),this.compareData(t)&&e.prototype.notify.call(this,t))},t.prototype.unsubscribe=function(){this.subscribed=!1,e.prototype.clearListeners.call(this)},t.prototype.compareData=function(e){return this.localPresubscriptions.some(function(t){return i.matchWithWildcard(t.deviceId,e.deviceId)&&(0===t.resourcePaths.length||t.resourcePaths.some(function(t){return i.matchWithWildcard(t,e.path)}))})},t.prototype.syncPresubscriptions=function(){var e=this;this.connect&&(this.connect.listPresubscriptions().then(function(t){var r=e.localPresubscriptions.concat(t),n=r.filter(function(e,t,r){return t===r.indexOf(e)});e.connect.updatePresubscriptions(n)}),"OnValueUpdate"===this.firstValue&&this.localPresubscriptions.forEach(function(t){e.connect.listConnectedDevices().then(function(r){r.data.filter(function(e){return i.matchWithWildcard(e.id,t.deviceId)}).forEach(function(r){r.listResources().then(function(n){n.forEach(function(n){(0===t.resourcePaths.length||t.resourcePaths.some(function(e){return i.matchWithWildcard(e,n.path)}))&&e.connect.addResourceSubscription(r.id,n.path)})})})})}))},t}(o.Observer);r.ResourceValuesObserver=s},{"../../../legacy/common/functions":9,"./observer":38}],40:[function(e,t,r){"use strict";/*
* Pelion Device Management JavaScript SDK
* Copyright Arm Limited 2017
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
Object.defineProperty(r,"__esModule",{value:!0});var n=e("./observers/deviceStateObserver"),o=e("./observers/resourceValuesObserver"),i=e("./observers/masterObserver"),s=function(){function e(e){e&&(this.connect=e),this.deviceStateObservers=new Array,this.resourceValueObservers=new Array,this.masterObserver=new i.MasterObserver}return e.prototype.deviceStateChanges=function(e){var t=new n.DeviceStateObserver(e);return this.deviceStateObservers.push(t),this.startNotifications(),t},e.prototype.resourceValues=function(e,t){void 0===t&&(t="OnValueUpdate");var r=new o.ResourceValuesObserver(e,this.connect,t);return this.resourceValueObservers.push(r),this.startNotifications(),r},e.prototype.allNotifications=function(){return this.startNotifications(),this.masterObserver},e.prototype.notifyDeviceEvents=function(e){this.deviceStateObservers.forEach(function(t){return t.notify(e)})},e.prototype.notifyResourceValues=function(e){this.resourceValueObservers.forEach(function(t){return t.notify(e)})},e.prototype.notifyAllNotifications=function(e){this.masterObserver.notify(e)},e.prototype.startNotifications=function(){this.connect&&this.connect.startNotifications()},e}();r.Subscribe=s},{"./observers/deviceStateObserver":36,"./observers/masterObserver":37,"./observers/resourceValuesObserver":39}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(){}return e.packageName="mbed-cloud-sdk",e.version="1.0.0",e.commit="42069",e.testrunnerVersion="1.0.0",e.isPublished=!1,e}();r.Version=n},{}],42:[function(e,t,r){},{}],43:[function(e,t,r){function n(e){if(e)return o(e)}function o(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}void 0!==t&&(t.exports=n),n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n,o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],44:[function(t,r,n){!function(o,i){"use strict";"function"==typeof e&&e.amd?e("error-stack-parser",["stackframe"],i):"object"==typeof n?r.exports=i(t("stackframe")):o.ErrorStackParser=i(o.StackFrame)}(this,function(e){"use strict";function t(e,t,r){if("function"==typeof Array.prototype.map)return e.map(t,r);for(var n=new Array(e.length),o=0;o<e.length;o++)n[o]=t.call(r,e[o]);return n}function r(e,t,r){if("function"==typeof Array.prototype.filter)return e.filter(t,r);for(var n=[],o=0;o<e.length;o++)t.call(r,e[o])&&n.push(e[o]);return n}function n(e,t){if("function"==typeof Array.prototype.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1}var o=/(^|@)\S+\:\d+/,i=/^\s*at .*(\S+\:\d+|\(native\))/m,s=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(i))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,r=t.exec(e.replace(/[\(\)]/g,""));return[r[1],r[2]||void 0,r[3]||void 0]},parseV8OrIE:function(o){return t(r(o.stack.split("\n"),function(e){return!!e.match(i)},this),function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var r=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),o=this.extractLocation(r.pop()),i=r.join(" ")||void 0,s=n(["eval","<anonymous>"],o[0])>-1?void 0:o[0];return new e(i,void 0,s,o[1],o[2],t)},this)},parseFFOrSafari:function(n){return t(r(n.stack.split("\n"),function(e){return!e.match(s)},this),function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e(t);var r=t.split("@"),n=this.extractLocation(r.pop()),o=r.join("@")||void 0;return new e(o,void 0,n[0],n[1],n[2],t)},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=t.message.split("\n"),o=[],i=2,s=n.length;i<s;i+=2){var a=r.exec(n[i]);a&&o.push(new e(void 0,void 0,a[2],a[1],void 0,n[i]))}return o},parseOpera10:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=t.stacktrace.split("\n"),o=[],i=0,s=n.length;i<s;i+=2){var a=r.exec(n[i]);a&&o.push(new e(a[3]||void 0,void 0,a[2],a[1],void 0,n[i]))}return o},parseOpera11:function(n){return t(r(n.stack.split("\n"),function(e){return!!e.match(o)&&!e.match(/^Error created at/)},this),function(t){var r,n=t.split("@"),o=this.extractLocation(n.pop()),i=n.shift()||"",s=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(r=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new e(s,a,o[0],o[1],o[2],t)},this)}}})},{stackframe:56}],45:[function(e,t,r){function n(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=w(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}function o(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function i(e,t,r){if(t)e.call(r);else for(var n=e.length,o=y(e,n),i=0;i<n;++i)o[i].call(r)}function s(e,t,r,n){if(t)e.call(r,n);else for(var o=e.length,i=y(e,o),s=0;s<o;++s)i[s].call(r,n)}function a(e,t,r,n,o){if(t)e.call(r,n,o);else for(var i=e.length,s=y(e,i),a=0;a<i;++a)s[a].call(r,n,o)}function u(e,t,r,n,o,i){if(t)e.call(r,n,o,i);else for(var s=e.length,a=y(e,s),u=0;u<s;++u)a[u].call(r,n,o,i)}function c(e,t,r,n){if(t)e.apply(r,n);else for(var o=e.length,i=y(e,o),s=0;s<o;++s)i[s].apply(r,n)}function l(e,t,r,n){var i,s,a;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if(s=e._events,s?(s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),a=s[t]):(s=e._events=w(null),e._eventsCount=0),a){if("function"==typeof a?a=s[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),!a.warned&&(i=o(e))&&i>0&&a.length>i){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else a=s[t]=r,++e._eventsCount;return e}function p(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=E.call(p,n);return o.listener=r,n.wrapFn=o,o}function g(e,t,r){var n=e._events;if(!n)return[];var o=n[t];return o?"function"==typeof o?r?[o.listener||o]:[o]:r?m(o):y(o,o.length):[]}function d(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function h(e,t){for(var r=t,n=r+1,o=e.length;n<o;r+=1,n+=1)e[r]=e[n];e.pop()}function y(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function v(e){var t=function(){};return t.prototype=e,new t}function _(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return r}function b(e){var t=this;return function(){return t.apply(e,arguments)}}var w=Object.create||v,L=Object.keys||_,E=Function.prototype.bind||b;t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0;var S,O=10;try{var T={};Object.defineProperty&&Object.defineProperty(T,"x",{value:0}),S=0===T.x}catch(e){S=!1}S?Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return O},set:function(e){if("number"!=typeof e||e<0||e!==e)throw new TypeError('"defaultMaxListeners" must be a positive number');O=e}}):n.defaultMaxListeners=O,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return o(this)},n.prototype.emit=function(e){var t,r,n,o,l,p,f="error"===e;if(p=this._events)f=f&&null==p.error;else if(!f)return!1;if(f){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var g=new Error('Unhandled "error" event. ('+t+")");throw g.context=t,g}if(!(r=p[e]))return!1;var d="function"==typeof r;switch(n=arguments.length){case 1:i(r,d,this);break;case 2:s(r,d,this,arguments[1]);break;case 3:a(r,d,this,arguments[1],arguments[2]);break;case 4:u(r,d,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(n-1),l=1;l<n;l++)o[l-1]=arguments[l];c(r,d,this,o)}return!0},n.prototype.addListener=function(e,t){return l(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return l(this,e,t,!0)},n.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,f(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,f(this,e,t)),this},n.prototype.removeListener=function(e,t){var r,n,o,i,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=w(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():h(r,o),1===r.length&&(n[e]=r[0]),n.removeListener&&this.emit("removeListener",e,s||t)}return this},n.prototype.removeAllListeners=function(e){var t,r,n;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=w(null),this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=w(null):delete r[e]),this;if(0===arguments.length){var o,i=L(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=w(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},n.prototype.listeners=function(e){return g(this,e,!0)},n.prototype.rawListeners=function(e){return g(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},n.prototype.listenerCount=d,n.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],46:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(p===setTimeout)return setTimeout(e,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function s(e){if(f===clearTimeout)return clearTimeout(e);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){y&&d&&(y=!1,d.length?h=d.concat(h):m=-1,h.length&&u())}function u(){if(!y){var e=i(a);y=!0;for(var t=h.length;t;){for(d=h,h=[];++m<t;)d&&d[m].run();m=-1,t=h.length}d=null,y=!1,s(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var p,f,g=t.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(e){p=n}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var d,h=[],y=!1,m=-1;g.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new c(e,t)),1!==h.length||y||i(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},g.title="browser",g.browser=!0,g.env={},g.argv=[],g.version="",g.versions={},g.on=l,g.addListener=l,g.once=l,g.off=l,g.removeListener=l,g.removeAllListeners=l,g.emit=l,g.prependListener=l,g.prependOnceListener=l,g.listeners=function(e){return[]},g.binding=function(e){throw new Error("process.binding is not supported")},g.cwd=function(){return"/"},g.chdir=function(e){throw new Error("process.chdir is not supported")},g.umask=function(){return 0}},{}],47:[function(e,t,r){function n(){this._array=[],this._set=Object.create(null)}var o=e("./util"),i=Object.prototype.hasOwnProperty;n.fromArray=function(e,t){for(var r=new n,o=0,i=e.length;o<i;o++)r.add(e[o],t);return r},n.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},n.prototype.add=function(e,t){var r=o.toSetString(e),n=i.call(this._set,r),s=this._array.length;n&&!t||this._array.push(e),n||(this._set[r]=s)},n.prototype.has=function(e){var t=o.toSetString(e);return i.call(this._set,t)},n.prototype.indexOf=function(e){var t=o.toSetString(e);if(i.call(this._set,t))return this._set[t];throw new Error('"'+e+'" is not in the set.')},n.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},n.prototype.toArray=function(){return this._array.slice()},r.ArraySet=n},{"./util":53}],48:[function(e,t,r){function n(e){return e<0?1+(-e<<1):0+(e<<1)}function o(e){var t=1==(1&e),r=e>>1;return t?-r:r}var i=e("./base64");r.encode=function(e){var t,r="",o=n(e);do{t=31&o,o>>>=5,o>0&&(t|=32),r+=i.encode(t)}while(o>0);return r},r.decode=function(e,t,r){var n,s,a=e.length,u=0,c=0;do{if(t>=a)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(s=i.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));n=!!(32&s),s&=31,u+=s<<c,c+=5}while(n);r.value=o(u),r.rest=t}},{"./base64":49}],49:[function(e,t,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");r.encode=function(e){if(0<=e&&e<n.length)return n[e];throw new TypeError("Must be between 0 and 63: "+e)},r.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},{}],50:[function(e,t,r){function n(e,t,o,i,s,a){var u=Math.floor((t-e)/2)+e,c=s(o,i[u],!0);return 0===c?u:c>0?t-u>1?n(u,t,o,i,s,a):a==r.LEAST_UPPER_BOUND?t<i.length?t:-1:u:u-e>1?n(e,u,o,i,s,a):a==r.LEAST_UPPER_BOUND?u:e<0?-1:e}r.GREATEST_LOWER_BOUND=1,r.LEAST_UPPER_BOUND=2,r.search=function(e,t,o,i){if(0===t.length)return-1;var s=n(-1,t.length,e,t,o,i||r.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&0===o(t[s],t[s-1],!0);)--s;return s}},{}],51:[function(e,t,r){function n(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function o(e,t){return Math.round(e+Math.random()*(t-e))}function i(e,t,r,s){if(r<s){var a=o(r,s),u=r-1;n(e,a,s);for(var c=e[s],l=r;l<s;l++)t(e[l],c)<=0&&(u+=1,n(e,u,l));n(e,u+1,l);var p=u+1;i(e,t,r,p-1),i(e,t,p+1,s)}}r.quickSort=function(e,t){i(e,t,0,e.length-1)}},{}],52:[function(e,t,r){function n(e){var t=e;return"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,""))),null!=t.sections?new s(t):new o(t)}function o(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var r=a.getArg(t,"version"),n=a.getArg(t,"sources"),o=a.getArg(t,"names",[]),i=a.getArg(t,"sourceRoot",null),s=a.getArg(t,"sourcesContent",null),u=a.getArg(t,"mappings"),l=a.getArg(t,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);n=n.map(String).map(a.normalize).map(function(e){return i&&a.isAbsolute(i)&&a.isAbsolute(e)?a.relative(i,e):e}),this._names=c.fromArray(o.map(String),!0),this._sources=c.fromArray(n,!0),this.sourceRoot=i,this.sourcesContent=s,this._mappings=u,this.file=l}function i(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function s(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var r=a.getArg(t,"version"),o=a.getArg(t,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new c,this._names=new c;var i={line:-1,column:0};this._sections=o.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=a.getArg(e,"offset"),r=a.getArg(t,"line"),o=a.getArg(t,"column");if(r<i.line||r===i.line&&o<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=t,{generatedOffset:{generatedLine:r+1,generatedColumn:o+1},consumer:new n(a.getArg(e,"map"))}})}var a=e("./util"),u=e("./binary-search"),c=e("./array-set").ArraySet,l=e("./base64-vlq"),p=e("./quick-sort").quickSort;n.fromSourceMap=function(e){return o.fromSourceMap(e)},n.prototype._version=3,n.prototype.__generatedMappings=null,Object.defineProperty(n.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),n.prototype.__originalMappings=null,Object.defineProperty(n.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),n.prototype._charIsMappingSeparator=function(e,t){var r=e.charAt(t);return";"===r||","===r},n.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},n.GENERATED_ORDER=1,n.ORIGINAL_ORDER=2,n.GREATEST_LOWER_BOUND=1,n.LEAST_UPPER_BOUND=2,n.prototype.eachMapping=function(e,t,r){var o,i=t||null,s=r||n.GENERATED_ORDER;switch(s){case n.GENERATED_ORDER:o=this._generatedMappings;break;case n.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var u=this.sourceRoot;o.map(function(e){var t=null===e.source?null:this._sources.at(e.source);return null!=t&&null!=u&&(t=a.join(u,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,i)},n.prototype.allGeneratedPositionsFor=function(e){var t=a.getArg(e,"line"),r={source:a.getArg(e,"source"),originalLine:t,originalColumn:a.getArg(e,"column",0)};if(null!=this.sourceRoot&&(r.source=a.relative(this.sourceRoot,r.source)),!this._sources.has(r.source))return[];r.source=this._sources.indexOf(r.source);var n=[],o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",a.compareByOriginalPositions,u.LEAST_UPPER_BOUND);if(o>=0){var i=this._originalMappings[o];if(void 0===e.column)for(var s=i.originalLine;i&&i.originalLine===s;)n.push({line:a.getArg(i,"generatedLine",null),column:a.getArg(i,"generatedColumn",null),lastColumn:a.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++o];else for(var c=i.originalColumn;i&&i.originalLine===t&&i.originalColumn==c;)n.push({line:a.getArg(i,"generatedLine",null),column:a.getArg(i,"generatedColumn",null),lastColumn:a.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++o]}return n},r.SourceMapConsumer=n,o.prototype=Object.create(n.prototype),o.prototype.consumer=n,o.fromSourceMap=function(e){var t=Object.create(o.prototype),r=t._names=c.fromArray(e._names.toArray(),!0),n=t._sources=c.fromArray(e._sources.toArray(),!0);t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file;for(var s=e._mappings.toArray().slice(),u=t.__generatedMappings=[],l=t.__originalMappings=[],f=0,g=s.length;f<g;f++){var d=s[f],h=new i;h.generatedLine=d.generatedLine,h.generatedColumn=d.generatedColumn,d.source&&(h.source=n.indexOf(d.source),h.originalLine=d.originalLine,h.originalColumn=d.originalColumn,d.name&&(h.name=r.indexOf(d.name)),l.push(h)),u.push(h)}return p(t.__originalMappings,a.compareByOriginalPositions),t},o.prototype._version=3,Object.defineProperty(o.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?a.join(this.sourceRoot,e):e},this)}}),o.prototype._parseMappings=function(e,t){for(var r,n,o,s,u,c=1,f=0,g=0,d=0,h=0,y=0,m=e.length,v=0,_={},b={},w=[],L=[];v<m;)if(";"===e.charAt(v))c++,v++,f=0;else if(","===e.charAt(v))v++;else{for(r=new i,r.generatedLine=c,s=v;s<m&&!this._charIsMappingSeparator(e,s);s++);if(n=e.slice(v,s),o=_[n])v+=n.length;else{for(o=[];v<s;)l.decode(e,v,b),u=b.value,v=b.rest,o.push(u);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");_[n]=o}r.generatedColumn=f+o[0],f=r.generatedColumn,o.length>1&&(r.source=h+o[1],h+=o[1],r.originalLine=g+o[2],g=r.originalLine,r.originalLine+=1,r.originalColumn=d+o[3],d=r.originalColumn,o.length>4&&(r.name=y+o[4],y+=o[4])),L.push(r),"number"==typeof r.originalLine&&w.push(r)}p(L,a.compareByGeneratedPositionsDeflated),this.__generatedMappings=L,p(w,a.compareByOriginalPositions),this.__originalMappings=w},o.prototype._findMapping=function(e,t,r,n,o,i){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return u.search(e,t,o,i)},o.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(t.generatedLine===r.generatedLine){t.lastGeneratedColumn=r.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},o.prototype.originalPositionFor=function(e){var t={generatedLine:a.getArg(e,"line"),generatedColumn:a.getArg(e,"column")},r=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",a.compareByGeneratedPositionsDeflated,a.getArg(e,"bias",n.GREATEST_LOWER_BOUND));if(r>=0){var o=this._generatedMappings[r];if(o.generatedLine===t.generatedLine){var i=a.getArg(o,"source",null);null!==i&&(i=this._sources.at(i),null!=this.sourceRoot&&(i=a.join(this.sourceRoot,i)));var s=a.getArg(o,"name",null);return null!==s&&(s=this._names.at(s)),{source:i,line:a.getArg(o,"originalLine",null),column:a.getArg(o,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},o.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))},o.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=a.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var r;if(null!=this.sourceRoot&&(r=a.urlParse(this.sourceRoot))){var n=e.replace(/^file:\/\//,"");if("file"==r.scheme&&this._sources.has(n))return this.sourcesContent[this._sources.indexOf(n)];if((!r.path||"/"==r.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},o.prototype.generatedPositionFor=function(e){var t=a.getArg(e,"source");if(null!=this.sourceRoot&&(t=a.relative(this.sourceRoot,t)),!this._sources.has(t))return{line:null,column:null,lastColumn:null};t=this._sources.indexOf(t);var r={source:t,originalLine:a.getArg(e,"line"),originalColumn:a.getArg(e,"column")},o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",a.compareByOriginalPositions,a.getArg(e,"bias",n.GREATEST_LOWER_BOUND));if(o>=0){var i=this._originalMappings[o];if(i.source===r.source)return{line:a.getArg(i,"generatedLine",null),column:a.getArg(i,"generatedColumn",null),lastColumn:a.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},r.BasicSourceMapConsumer=o,s.prototype=Object.create(n.prototype),s.prototype.constructor=n,s.prototype._version=3,Object.defineProperty(s.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e}}),s.prototype.originalPositionFor=function(e){var t={generatedLine:a.getArg(e,"line"),generatedColumn:a.getArg(e,"column")},r=u.search(t,this._sections,function(e,t){var r=e.generatedLine-t.generatedOffset.generatedLine;return r||e.generatedColumn-t.generatedOffset.generatedColumn}),n=this._sections[r];return n?n.consumer.originalPositionFor({line:t.generatedLine-(n.generatedOffset.generatedLine-1),column:t.generatedColumn-(n.generatedOffset.generatedLine===t.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},s.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},s.prototype.sourceContentFor=function(e,t){for(var r=0;r<this._sections.length;r++){var n=this._sections[r],o=n.consumer.sourceContentFor(e,!0);if(o)return o}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},s.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var r=this._sections[t];if(-1!==r.consumer.sources.indexOf(a.getArg(e,"source"))){var n=r.consumer.generatedPositionFor(e);if(n){return{line:n.line+(r.generatedOffset.generatedLine-1),column:n.column+(r.generatedOffset.generatedLine===n.line?r.generatedOffset.generatedColumn-1:0)}}}}return{line:null,column:null}},s.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var n=this._sections[r],o=n.consumer._generatedMappings,i=0;i<o.length;i++){var s=o[i],u=n.consumer._sources.at(s.source);null!==n.consumer.sourceRoot&&(u=a.join(n.consumer.sourceRoot,u)),this._sources.add(u),u=this._sources.indexOf(u);var c=n.consumer._names.at(s.name);this._names.add(c),c=this._names.indexOf(c);var l={source:u,generatedLine:s.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:s.generatedColumn+(n.generatedOffset.generatedLine===s.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:s.originalLine,originalColumn:s.originalColumn,name:c};this.__generatedMappings.push(l),"number"==typeof l.originalLine&&this.__originalMappings.push(l)}p(this.__generatedMappings,a.compareByGeneratedPositionsDeflated),p(this.__originalMappings,a.compareByOriginalPositions)},r.IndexedSourceMapConsumer=s},{"./array-set":47,"./base64-vlq":48,"./binary-search":50,"./quick-sort":51,"./util":53}],53:[function(e,t,r){function n(e,t,r){if(t in e)return e[t];if(3===arguments.length)return r;throw new Error('"'+t+'" is a required argument.')}function o(e){var t=e.match(m);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function i(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function s(e){var t=e,n=o(e);if(n){if(!n.path)return e;t=n.path}for(var s,a=r.isAbsolute(t),u=t.split(/\/+/),c=0,l=u.length-1;l>=0;l--)s=u[l],"."===s?u.splice(l,1):".."===s?c++:c>0&&(""===s?(u.splice(l+1,c),c=0):(u.splice(l,2),c--));return t=u.join("/"),""===t&&(t=a?"/":"."),n?(n.path=t,i(n)):t}function a(e,t){""===e&&(e="."),""===t&&(t=".");var r=o(t),n=o(e);if(n&&(e=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),i(r);if(r||t.match(v))return t;if(n&&!n.host&&!n.path)return n.host=t,i(n);var a="/"===t.charAt(0)?t:s(e.replace(/\/+$/,"")+"/"+t);return n?(n.path=a,i(n)):a}function u(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var r=0;0!==t.indexOf(e+"/");){var n=e.lastIndexOf("/");if(n<0)return t;if(e=e.slice(0,n),e.match(/^([^\/]+:\/)?\/*$/))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)}function c(e){return e}function l(e){return f(e)?"$"+e:e}function p(e){return f(e)?e.slice(1):e}function f(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var r=t-10;r>=0;r--)if(36!==e.charCodeAt(r))return!1;return!0}function g(e,t,r){var n=e.source-t.source;return 0!==n?n:0!==(n=e.originalLine-t.originalLine)?n:0!==(n=e.originalColumn-t.originalColumn)||r?n:0!==(n=e.generatedColumn-t.generatedColumn)?n:(n=e.generatedLine-t.generatedLine,0!==n?n:e.name-t.name)}function d(e,t,r){var n=e.generatedLine-t.generatedLine;return 0!==n?n:0!==(n=e.generatedColumn-t.generatedColumn)||r?n:0!==(n=e.source-t.source)?n:0!==(n=e.originalLine-t.originalLine)?n:(n=e.originalColumn-t.originalColumn,0!==n?n:e.name-t.name)}function h(e,t){return e===t?0:e>t?1:-1}function y(e,t){var r=e.generatedLine-t.generatedLine;return 0!==r?r:0!==(r=e.generatedColumn-t.generatedColumn)?r:0!==(r=h(e.source,t.source))?r:0!==(r=e.originalLine-t.originalLine)?r:(r=e.originalColumn-t.originalColumn,0!==r?r:h(e.name,t.name))}r.getArg=n;var m=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,v=/^data:.+\,.+$/;r.urlParse=o,r.urlGenerate=i,r.normalize=s,r.join=a,r.isAbsolute=function(e){return"/"===e.charAt(0)||!!e.match(m)},r.relative=u;var _=function(){return!("__proto__"in Object.create(null))}();r.toSetString=_?c:l,r.fromSetString=_?c:p,r.compareByOriginalPositions=g,r.compareByGeneratedPositionsDeflated=d,r.compareByGeneratedPositionsInflated=y},{}],54:[function(t,r,n){!function(t,o){"use strict";"function"==typeof e&&e.amd?e("stackframe",[],o):"object"==typeof n?r.exports=o():t.StackFrame=o()}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e.charAt(0).toUpperCase()+e.substring(1)}function r(e){return function(){return this[e]}}function n(e){if(e instanceof Object)for(var r=0;r<u.length;r++)e.hasOwnProperty(u[r])&&void 0!==e[u[r]]&&this["set"+t(u[r])](e[u[r]])}var o=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],s=["fileName","functionName","source"],a=["args"],u=o.concat(i,s,a);n.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof n)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new n(e)}},toString:function(){
var e=this.getFileName()||"",t=this.getLineNumber()||"",r=this.getColumnNumber()||"",n=this.getFunctionName()||"";return this.getIsEval()?e?"[eval] ("+e+":"+t+":"+r+")":"[eval]:"+t+":"+r:n?n+" ("+e+":"+t+":"+r+")":e+":"+t+":"+r}},n.fromString=function(e){var t=e.indexOf("("),r=e.lastIndexOf(")"),o=e.substring(0,t),i=e.substring(t+1,r).split(","),s=e.substring(r+1);if(0===s.indexOf("@"))var a=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(s,""),u=a[1],c=a[2],l=a[3];return new n({functionName:o,args:i||void 0,fileName:u,lineNumber:c||void 0,columnNumber:l||void 0})};for(var c=0;c<o.length;c++)n.prototype["get"+t(o[c])]=r(o[c]),n.prototype["set"+t(o[c])]=function(e){return function(t){this[e]=Boolean(t)}}(o[c]);for(var l=0;l<i.length;l++)n.prototype["get"+t(i[l])]=r(i[l]),n.prototype["set"+t(i[l])]=function(t){return function(r){if(!e(r))throw new TypeError(t+" must be a Number");this[t]=Number(r)}}(i[l]);for(var p=0;p<s.length;p++)n.prototype["get"+t(s[p])]=r(s[p]),n.prototype["set"+t(s[p])]=function(e){return function(t){this[e]=String(t)}}(s[p]);return n})},{}],55:[function(t,r,n){!function(o,i){"use strict";"function"==typeof e&&e.amd?e("stack-generator",["stackframe"],i):"object"==typeof n?r.exports=i(t("stackframe")):o.StackGenerator=i(o.StackFrame)}(this,function(e){return{backtrace:function(t){var r=[],n=10;"object"==typeof t&&"number"==typeof t.maxStackSize&&(n=t.maxStackSize);for(var o=arguments.callee;o&&r.length<n;){for(var i=new Array(o.arguments.length),s=0;s<i.length;++s)i[s]=o.arguments[s];/function(?:\s+([\w$]+))+\s*\(/.test(o.toString())?r.push(new e({functionName:RegExp.$1||void 0,args:i})):r.push(new e({args:i}));try{o=o.caller}catch(e){break}}return r}}})},{stackframe:54}],56:[function(t,r,n){!function(t,o){"use strict";"function"==typeof e&&e.amd?e("stackframe",[],o):"object"==typeof n?r.exports=o():t.StackFrame=o()}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e,t,r,n,o,i){void 0!==e&&this.setFunctionName(e),void 0!==t&&this.setArgs(t),void 0!==r&&this.setFileName(r),void 0!==n&&this.setLineNumber(n),void 0!==o&&this.setColumnNumber(o),void 0!==i&&this.setSource(i)}return t.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(e){this.functionName=String(e)},getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getFileName:function(){return this.fileName},setFileName:function(e){this.fileName=String(e)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(t){if(!e(t))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(t)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(t){if(!e(t))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(t)},getSource:function(){return this.source},setSource:function(e){this.source=String(e)},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}},t})},{}],57:[function(t,r,n){!function(o,i){"use strict";"function"==typeof e&&e.amd?e("stacktrace-gps",["source-map","stackframe"],i):"object"==typeof n?r.exports=i(t("source-map/lib/source-map-consumer"),t("stackframe")):o.StackTraceGPS=i(o.SourceMap||o.sourceMap,o.StackFrame)}(this,function(e,t){"use strict";function r(e){return new Promise(function(t,r){var n=new XMLHttpRequest;n.open("get",e),n.onerror=r,n.onreadystatechange=function(){4===n.readyState&&(n.status>=200&&n.status<300?t(n.responseText):r(new Error("HTTP status: "+n.status+" retrieving "+e)))},n.send()})}function n(e){if("undefined"!=typeof window&&window.atob)return window.atob(e);throw new Error("You must supply a polyfill for window.atob in this environment")}function o(e){if("undefined"!=typeof JSON&&JSON.parse)return JSON.parse(e);throw new Error("You must supply a polyfill for JSON.parse in this environment")}function i(e,t){for(var r,n=/function\s+([^(]*?)\s*\(([^)]*)\)/,o=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,i=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,s=e.split("\n"),a="",u=Math.min(t,20),c=0;c<u;++c){var l=s[t-c-1],p=l.indexOf("//");if(p>=0&&(l=l.substr(0,p)),l){if(a=l+a,(r=o.exec(a))&&r[1])return r[1];if((r=n.exec(a))&&r[1])return r[1];if((r=i.exec(a))&&r[1])return r[1]}}}function s(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create)throw new Error("Unable to consume source maps in older browsers")}function a(e){if("object"!=typeof e)throw new TypeError("Given StackFrame is not an object");if("string"!=typeof e.fileName)throw new TypeError("Given file name is not a String");if("number"!=typeof e.lineNumber||e.lineNumber%1!=0||e.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if("number"!=typeof e.columnNumber||e.columnNumber%1!=0||e.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}function u(e){var t=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/.exec(e);if(t&&t[1])return t[1];throw new Error("sourceMappingURL not found")}function c(r,n,o){return new Promise(function(i,s){var a=new e.SourceMapConsumer(n),u=a.originalPositionFor({line:r.lineNumber,column:r.columnNumber});if(u.source){var c=a.sourceContentFor(u.source);c&&(o[u.source]=c),i(new t(u.name||r.functionName,r.args,u.source,u.line,u.column))}else s(new Error("Could not get original source for given stackframe and source map"))})}return function e(l){if(!(this instanceof e))return new e(l);l=l||{},this.sourceCache=l.sourceCache||{},this.ajax=l.ajax||r,this._atob=l.atob||n,this._get=function(e){return new Promise(function(t,r){var n="data:"===e.substr(0,5);if(this.sourceCache[e])t(this.sourceCache[e]);else if(l.offline&&!n)r(new Error("Cannot make network requests in offline mode"));else if(n){var o=/^data:application\/json;([\w=:"-]+;)*base64,/,i=e.match(o);if(i){var s=i[0].length,a=e.substr(s),u=this._atob(a);this.sourceCache[e]=u,t(u)}else r(new Error("The encoding of the inline sourcemap is not supported"))}else{var c=this.ajax(e,{method:"get"});this.sourceCache[e]=c,c.then(t,r)}}.bind(this))},this.pinpoint=function(e){return new Promise(function(t,r){this.getMappedLocation(e).then(function(e){function r(){t(e)}this.findFunctionName(e).then(t,r).catch(r)}.bind(this),r)}.bind(this))},this.findFunctionName=function(e){return new Promise(function(r,n){a(e),this._get(e.fileName).then(function(n){var o=e.lineNumber,s=e.columnNumber,a=i(n,o);r(a?new t(a,e.args,e.fileName,o,s):e)},n).catch(n)}.bind(this))},this.getMappedLocation=function(e){return new Promise(function(t,r){s(),a(e);var n=this.sourceCache,i=e.fileName;this._get(i).then(function(s){var a=u(s),l="data:"===a.substr(0,5),p=i.substring(0,i.lastIndexOf("/")+1);"/"===a[0]||l||/^https?:\/\/|^\/\//i.test(a)||(a=p+a),this._get(a).then(function(r){"string"==typeof r&&(r=o(r.replace(/^\)\]\}'/,""))),void 0===r.sourceRoot&&(r.sourceRoot=p),c(e,r,n).then(t).catch(function(){t(e)})},r).catch(r)}.bind(this),r).catch(r)}.bind(this))}}})},{"source-map/lib/source-map-consumer":52,stackframe:56}],58:[function(t,r,n){!function(o,i){"use strict";"function"==typeof e&&e.amd?e("stacktrace",["error-stack-parser","stack-generator","stacktrace-gps"],i):"object"==typeof n?r.exports=i(t("error-stack-parser"),t("stack-generator"),t("stacktrace-gps")):o.StackTrace=i(o.ErrorStackParser,o.StackGenerator,o.StackTraceGPS)}(this,function(e,t,r){function n(e,t){var r={};return[e,t].forEach(function(e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}),r}function o(e){return e.stack||e["opera#sourceloc"]}function i(e,t){return"function"==typeof t?e.filter(t):e}var s={filter:function(e){return-1===(e.functionName||"").indexOf("StackTrace$$")&&-1===(e.functionName||"").indexOf("ErrorStackParser$$")&&-1===(e.functionName||"").indexOf("StackTraceGPS$$")&&-1===(e.functionName||"").indexOf("StackGenerator$$")},sourceCache:{}},a=function(){try{throw new Error}catch(e){return e}};return{get:function(e){var t=a();return o(t)?this.fromError(t,e):this.generateArtificially(e)},getSync:function(r){r=n(s,r);var u=a();return i(o(u)?e.parse(u):t.backtrace(r),r.filter)},fromError:function(t,o){o=n(s,o);var a=new r(o);return new Promise(function(r){var n=i(e.parse(t),o.filter);r(Promise.all(n.map(function(e){return new Promise(function(t){function r(){t(e)}a.pinpoint(e).then(t,r).catch(r)})})))}.bind(this))},generateArtificially:function(e){e=n(s,e);var r=t.backtrace(e);return"function"==typeof e.filter&&(r=r.filter(e.filter)),Promise.resolve(r)},instrument:function(e,t,r,n){if("function"!=typeof e)throw new Error("Cannot instrument non-function object");if("function"==typeof e.__stacktraceOriginalFn)return e;var i=function(){try{return this.get().then(t,r).catch(r),e.apply(n||this,arguments)}catch(e){throw o(e)&&this.fromError(e).then(t,r).catch(r),e}}.bind(this);return i.__stacktraceOriginalFn=e,i},deinstrument:function(e){if("function"!=typeof e)throw new Error("Cannot de-instrument non-function object");return"function"==typeof e.__stacktraceOriginalFn?e.__stacktraceOriginalFn:e},report:function(e,t,r){return new Promise(function(n,o){var i=new XMLHttpRequest;i.onerror=o,i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<400?n(i.responseText):o(new Error("POST to "+t+" failed with status: "+i.status)))},i.open("post",t),i.setRequestHeader("Content-Type","application/json");var s={stack:e};void 0!==r&&(s.message=r),i.send(JSON.stringify(s))})}}})},{"error-stack-parser":44,"stack-generator":55,"stacktrace-gps":57}],59:[function(e,t,r){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}}),n.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,t.arguments)})},t.exports=n},{}],60:[function(e,t,r){function n(){}function o(e){if(!h(e))return e;var t=[];for(var r in e)i(t,r,e[r]);return t.join("&")}function i(e,t,r){if(null!=r)if(Array.isArray(r))r.forEach(function(r){i(e,t,r)});else if(h(r))for(var n in r)i(e,t+"["+n+"]",r[n]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));else null===r&&e.push(encodeURIComponent(t))}function s(e){for(var t,r,n={},o=e.split("&"),i=0,s=o.length;i<s;++i)t=o[i],r=t.indexOf("="),-1==r?n[decodeURIComponent(t)]="":n[decodeURIComponent(t.slice(0,r))]=decodeURIComponent(t.slice(r+1));return n}function a(e){for(var t,r,n,o,i=e.split(/\r?\n/),s={},a=0,u=i.length;a<u;++a)r=i[a],-1!==(t=r.indexOf(":"))&&(n=r.slice(0,t).toLowerCase(),o=_(r.slice(t+1)),s[n]=o);return s}function u(e){return/[\/+]json($|[^-\w])/.test(e)}function c(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=a(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function l(e,t){var r=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new c(r)}catch(t){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=t,r.xhr?(e.rawResponse=void 0===r.xhr.responseType?r.xhr.responseText:r.xhr.response,e.status=r.xhr.status?r.xhr.status:null,e.statusCode=e.status):(e.rawResponse=null,e.status=null),r.callback(e)}r.emit("response",t);var n;try{r._isResponseOK(t)||(n=new Error(t.statusText||"Unsuccessful HTTP response"))}catch(e){n=e}n?(n.original=e,n.response=t,n.status=t.status,r.callback(n,t)):r.callback(null,t)})}function p(e,t,r){var n=v("DELETE",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}var f;"undefined"!=typeof window?f=window:"undefined"!=typeof self?f=self:(console.warn("Using browser-only version of superagent in non-browser environment"),f=this);var g=e("component-emitter"),d=e("./request-base"),h=e("./is-object"),y=e("./response-base"),m=e("./agent-base"),v=r=t.exports=function(e,t){return"function"==typeof t?new r.Request("GET",e).end(t):1==arguments.length?new r.Request("GET",e):new r.Request(e,t)};r.Request=l,v.getXHR=function(){if(!(!f.XMLHttpRequest||f.location&&"file:"==f.location.protocol&&f.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var _="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};v.serializeObject=o,v.parseString=s,v.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},v.serialize={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},v.parse={"application/x-www-form-urlencoded":s,"application/json":JSON.parse},y(c.prototype),c.prototype._parseBody=function(e){var t=v.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&u(this.type)&&(t=v.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},c.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot "+t+" "+r+" ("+this.status+")",o=new Error(n);return o.status=this.status,o.method=t,o.url=r,o},v.Response=c,g(l.prototype),d(l.prototype),l.prototype.type=function(e){return this.set("Content-Type",v.types[e]||e),this},l.prototype.accept=function(e){return this.set("Accept",v.types[e]||e),this},l.prototype.auth=function(e,t,r){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(r=t,t=""),r||(r={type:"function"==typeof btoa?"basic":"auto"});var n=function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(e,t,r,n)},l.prototype.query=function(e){return"string"!=typeof e&&(e=o(e)),e&&this._query.push(e),this},l.prototype.attach=function(e,t,r){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,r||t.name)}return this},l.prototype._getFormData=function(){return this._formData||(this._formData=new f.FormData),this._formData},l.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var r=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),r(e,t)},l.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},l.prototype.buffer=l.prototype.ca=l.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},l.prototype.pipe=l.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},l.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},l.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||n,this._finalizeQueryString(),this._end()},l.prototype._end=function(){var e=this,t=this.xhr=v.getXHR(),r=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var r=t.readyState;if(r>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==r){var n;try{n=t.status}catch(e){n=0}if(!n){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var n=function(t,r){r.total>0&&(r.percent=r.loaded/r.total*100),r.direction=t,e.emit("progress",r)};if(this.hasListeners("progress"))try{t.onprogress=n.bind(null,"download"),t.upload&&(t.upload.onprogress=n.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof r&&!this._isHost(r)){var o=this._header["content-type"],i=this._serializer||v.serialize[o?o.split(";")[0]:""];!i&&u(o)&&(i=v.serialize["application/json"]),i&&(r=i(r))}for(var s in this.header)null!=this.header[s]&&this.header.hasOwnProperty(s)&&t.setRequestHeader(s,this.header[s]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==r?r:null),this},v.agent=function(){return new m},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(e){m.prototype[e.toLowerCase()]=function(t,r){var n=new v.Request(e,t);return this._setDefaults(n),r&&n.end(r),n}}),m.prototype.del=m.prototype.delete,v.get=function(e,t,r){var n=v("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},v.head=function(e,t,r){var n=v("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},v.options=function(e,t,r){var n=v("OPTIONS",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},v.del=p,v.delete=p,v.patch=function(e,t,r){var n=v("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},v.post=function(e,t,r){var n=v("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},v.put=function(e,t,r){var n=v("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}},{"./agent-base":59,"./is-object":61,"./request-base":62,"./response-base":63,"component-emitter":43}],61:[function(e,t,r){"use strict";function n(e){return null!==e&&"object"==typeof e}t.exports=n},{}],62:[function(e,t,r){"use strict";function n(e){if(e)return o(e)}function o(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}var i=e("./is-object");t.exports=n,n.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},n.prototype.parse=function(e){return this._parser=e,this},n.prototype.responseType=function(e){return this._responseType=e,this},n.prototype.serialize=function(e){return this._serializer=e,this},n.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},n.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];n.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var r=this._retryCallback(e,t);if(!0===r)return!0;if(!1===r)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~s.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},n.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},n.prototype.then=function(e,t){if(!this._fullfilledPromise){var r=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(e,t){r.end(function(r,n){r?t(r):e(n)})})}return this._fullfilledPromise.then(e,t)},n.prototype.catch=function(e){return this.then(void 0,e)},n.prototype.use=function(e){return e(this),this},n.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},n.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},n.prototype.get=function(e){return this._header[e.toLowerCase()]},n.prototype.getHeader=n.prototype.get,n.prototype.set=function(e,t){if(i(e)){for(var r in e)this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},n.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},n.prototype.field=function(e,t){if(null===e||void 0===e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),i(e)){for(var r in e)this.field(r,e[r]);return this}if(Array.isArray(t)){for(var n in t)this.field(e,t[n]);return this}if(null===t||void 0===t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},n.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},n.prototype._auth=function(e,t,r,n){switch(r.type){case"basic":this.set("Authorization","Basic "+n(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},n.prototype.withCredentials=function(e){return void 0==e&&(e=!0),this._withCredentials=e,this},n.prototype.redirects=function(e){return this._maxRedirects=e,this},n.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},n.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},n.prototype.send=function(e){var t=i(e),r=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&i(this._data))for(var n in e)this._data[n]=e[n];else"string"==typeof e?(r||this.type("form"),r=this._header["content-type"],this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(r||this.type("json"),this)},n.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},n.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var r=this.url.substring(t+1).split("&");"function"==typeof this._sort?r.sort(this._sort):r.sort(),this.url=this.url.substring(0,t)+"?"+r.join("&")}}},n.prototype._appendQueryString=function(){console.trace("Unsupported")},n.prototype._timeoutError=function(e,t,r){if(!this._aborted){var n=new Error(e+t+"ms exceeded");n.timeout=t,n.code="ECONNABORTED",n.errno=r,this.timedout=!0,this.abort(),this.callback(n)}},n.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},{"./is-object":61}],63:[function(e,t,r){"use strict";function n(e){if(e)return o(e)}function o(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}var i=e("./utils");t.exports=n,n.prototype.get=function(e){return this.header[e.toLowerCase()]},n.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=i.type(t);var r=i.params(t);for(var n in r)this[n]=r[n];this.links={};try{e.link&&(this.links=i.parseLinks(e.link))}catch(e){}},n.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},{"./utils":64}],64:[function(e,t,r){"use strict";r.type=function(e){return e.split(/ *; */).shift()},r.params=function(e){return e.split(/ *; */).reduce(function(e,t){var r=t.split(/ *= */),n=r.shift(),o=r.shift();return n&&o&&(e[n]=o),e},{})},r.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,t){var r=t.split(/ *; */),n=r[0].slice(1,-1);return e[r[1].split(/ *= */)[1].slice(1,-1)]=n,e},{})},r.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},{}],65:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../log/category/CategoryService"),o=e("../log/LoggerOptions"),i=e("../utils/DataStructures"),s=function(){function e(){}return e.prototype.help=function(){console.log(e._help)},e.prototype.example=function(){console.log(e._example)},e.prototype.showSettings=function(t){void 0===t&&(t="all");var r=new i.StringBuilder,n=e._getCategoryService();e._getCategories(t).forEach(function(t){e._processCategory(n,t,r,0)}),console.log(r.toString())},e.prototype.change=function(t){var r=e._getCategoryService(),n=e._getCategories(t.category),i=null,s=null,a=null,u=null,c=null,l=function(e){null!==c&&(c+=", "),null===c?c=e:c+=e};l("recursive="+t.recursive),"string"==typeof t.logLevel&&(i=o.LogLevel.fromString(t.logLevel),l("logLevel="+t.logLevel)),"string"==typeof t.logFormat&&(s=o.DateFormatEnum.fromString(t.logFormat),l("logFormat="+t.logFormat)),"boolean"==typeof t.showCategoryName&&(a=t.showCategoryName,l("showCategoryName="+t.showCategoryName)),"boolean"==typeof t.showTimestamp&&(u=t.showTimestamp,l("showTimestamp="+t.showTimestamp));var p=function(e){var t=r.getCategorySettings(e);null!==t&&(null!==i&&(t.logLevel=i),null!==s&&(t.logFormat.dateFormat.formatEnum=s),null!==u&&(t.logFormat.showTimeStamp=u),null!==a&&(t.logFormat.showCategoryName=a))};n.forEach(function(r){return e._applyToCategory(r,t.recursive,p)}),console.log("Applied changes: "+c+" to categories '"+t.category+"'.")},e.prototype.reset=function(t){void 0===t&&(t="all");var r=e._getCategoryService(),n=function(e){var t=r.getCategorySettings(e),n=r.getOriginalCategorySettings(e);null!==t&&null!==n&&(t.logLevel=n.logLevel,t.logFormat.dateFormat.formatEnum=n.logFormat.dateFormat.formatEnum,t.logFormat.showTimeStamp=n.logFormat.showTimeStamp,t.logFormat.showCategoryName=n.logFormat.showCategoryName)};e._getCategories(t).forEach(function(t){return e._applyToCategory(t,!0,n)}),console.log("Applied reset to category: "+t+".")},e._processCategory=function(t,r,n,i){var s=t.getCategorySettings(r);if(null!==s){if(n.append("  "+r.id+": "),i>0)for(var a=0;a<i;a++)n.append("  ");n.append(r.name+" ("+o.LogLevel[s.logLevel].toString()+"@"+o.LoggerType[s.loggerType].toString()+")\n"),r.children.length>0&&r.children.forEach(function(r){e._processCategory(t,r,n,i+1)})}},e._applyToCategory=function(t,r,n){n(t),r&&t.children.forEach(function(t){e._applyToCategory(t,r,n)})},e._getCategoryService=function(){return n.CategoryServiceImpl.getInstance()},e._getCategories=function(t){var r=e._getCategoryService(),n=[];if("all"===t)n=r.getRootCategories();else{var o=r.getCategoryById(t);if(null===o)throw new Error("Failed to find category with id "+t);n.push(o)}return n},e._help='\n  help(): void\n    ** Shows this help.\n\n  example(): void\n    ** Shows an example on how to use this.\n\n  showSettings(id: number | "all" = "all"): void\n    ** Shows settings for a specific category, or for all. The id of categories can be found by calling this method without parameter.\n\n  change(settings: CategoryServiceControlSettings): void\n    ** Changes the current settings for one or all categories.\n    **\n       CategoryServiceControlSettings, properties of object:\n         category: number | "all"\n           ** Apply to specific category, or "all".\n           ** Required\n\n         recursive: boolean\n           ** Apply to child categories (true) or not.\n           ** Required\n\n         logLevel: "Fatal" | "Error" | "Warn" | "Info" | "Debug" | "Trace" | undefined\n           ** Set log level, undefined will not change the setting.\n           ** Optional\n\n         logFormat: "Default" | "YearMonthDayTime" | "YearDayMonthWithFullTime" | "YearDayMonthTime" | undefined\n           ** Set the log format, undefined will not change the setting.\n           ** Optional\n\n         showTimestamp: boolean | undefined\n           ** Whether to show timestamp, undefined will not change the setting.\n           ** Optional\n\n         showCategoryName: boolean | undefined\n           ** Whether to show the category name, undefined will not change the setting.\n           ** Optional\n\n   reset(id: number | "all"): void\n     ** Resets everything to original values, for one specific or for all categories.\n',e._example='\n  Examples:\n    change({category: "all", recursive:true, logLevel: "Info"})\n      ** Change loglevel to Info for all categories, apply to child categories as well.\n\n    change({category: 1, recursive:false, logLevel: "Warn"})\n      ** Change logLevel for category 1, do not recurse.\n\n    change({category: "all", recursive:true, logLevel: "Debug", logFormat: "YearDayMonthTime", showTimestamp:false, showCategoryName:false})\n      ** Change loglevel to Debug for all categories, apply format, do not show timestamp and category names - recursively to child categories.\n\n',e}();r.CategoryServiceControlImpl=s},{"../log/LoggerOptions":68,"../log/category/CategoryService":77,"../utils/DataStructures":88}],66:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../log/LoggerOptions"),o=e("../log/standard/LFService"),i=e("../utils/DataStructures"),s=function(){function e(){}return e.prototype.help=function(){console.log(e._help)},e.prototype.listFactories=function(){var t=e._getRuntimeSettingsLoggerFactories(),r=new i.StringBuilder;r.appendLine("Registered LoggerFactories (index / name)");for(var n=0;n<t.length;n++){var o=t[n];r.append("  "+n).append(": "+o.getName()+"\n")}console.log(r.toString())},e.prototype.showSettings=function(t){void 0===t&&(t="all");var r=[];if("all"===t){var o=0;e._getRuntimeSettingsLoggerFactories().forEach(function(e){r.push(new i.TuplePair(o++,e))})}else{var s=e._getRuntimeSettingsLoggerFactories();if(!(t>=0&&t<s.length))throw new Error("Requested number: "+t+" was not found.");r.push(new i.TuplePair(t,s[t]))}for(var a=0,u=r;a<u.length;a++){var c=u[a];console.log("  LoggerFactory: "+c.y.getName()+" (id="+c.x+")");for(var l=c.y.getLogGroupRuntimeSettings(),p=0;p<l.length;p++){var f=l[p]
;console.log("     LogGroup: (id="+p+")"),console.log("       RegExp: "+f.logGroupRule.regExp.source),console.log("       Level: "+n.LogLevel[f.level].toString()),console.log("       LoggerType: "+n.LoggerType[f.loggerType].toString())}}},e.prototype.reset=function(t){void 0===t&&(t="all");var r=e._getRuntimeSettingsLoggerFactories(),n=[];"all"===t?n=r:t>=0&&t<r.length&&n.push(r[t]),n.forEach(function(e){console.log("Reset all settings for factory "+t),new a(e).reset()})},e.prototype.getLoggerFactoryControl=function(t){var r=e._getRuntimeSettingsLoggerFactories();if(t>=0&&t<r.length)return new a(r[t]);throw new Error("idFactory is invalid (less than 0) or non existing id.")},e._getRuntimeSettingsLoggerFactories=function(){return e._getSettings().getRuntimeSettingsForLoggerFactories()},e._getSettings=function(){return o.LFService.getRuntimeSettings()},e._help='\n  help(): void\n    ** Shows this help.\n\n  listFactories(): void\n    ** List all registered LoggerFactories with associated log groups with respective ids (ids can be used to target a factory and/or group).\n\n  showSettings(idFactory: number | "all"): void\n    ** Show log group settings for idFactory (use listFactories to find id for a LoggerFactory). If idFactory is "all" shows all factories.\n\n  getLoggerFactoryControl(idFactory: number): LoggerFactoryControl\n    ** Return LoggerFactoryControl when found for given idFactory or throws Error if invalid or null, get the id by using listFactories()\n\n  reset(idFactory: number | "all"): void\n    ** Resets given factory or all factories back to original values.\n',e}();r.LoggerControlImpl=s;var a=function(){function e(e){this._settings=e}return e.prototype.help=function(){console.log(e._help)},e.prototype.example=function(){console.log(e._example)},e.prototype.showSettings=function(e){void 0===e&&(e="all");var t=new i.StringBuilder,r=this._settings.getLogGroupRuntimeSettings();t.appendLine("Registered LogGroups (index / expression)");for(var o=0;o<r.length;o++){var s=r[o];t.appendLine("  "+o+": "+s.logGroupRule.regExp.source+", logLevel="+n.LogLevel[s.level].toString()+", showTimestamp="+s.logFormat.showTimeStamp+", showLoggerName="+s.logFormat.showLoggerName+", format="+n.DateFormatEnum[s.logFormat.dateFormat.formatEnum].toString())}console.log(t.toString())},e.prototype.change=function(e){var t=this._getLogGroupRunTimeSettingsFor(e.group),r=null,o=null,i=null,s=null,a=null,u=function(e){null!==a&&(a+=", "),null===a?a=e:a+=e};"string"==typeof e.logLevel&&(r=n.LogLevel.fromString(e.logLevel),u("logLevel="+e.logLevel)),"string"==typeof e.logFormat&&(o=n.DateFormatEnum.fromString(e.logFormat),u("logFormat="+e.logFormat)),"boolean"==typeof e.showLoggerName&&(i=e.showLoggerName,u("showLoggerName="+e.showLoggerName)),"boolean"==typeof e.showTimestamp&&(s=e.showTimestamp,u("showTimestamp="+e.showTimestamp)),t.forEach(function(e){null!==r&&(e.level=r),null!==o&&(e.logFormat.dateFormat.formatEnum=o),null!==s&&(e.logFormat.showTimeStamp=s),null!==i&&(e.logFormat.showLoggerName=i)}),console.log("Applied changes: "+a+" to log groups '"+e.group+"'.")},e.prototype.reset=function(e){void 0===e&&(e="all");for(var t=this._getLogGroupRunTimeSettingsFor(e),r=0,n=t;r<n.length;r++){var o=n[r];o.level=o.logGroupRule.level,o.logFormat.showTimeStamp=o.logGroupRule.logFormat.showTimeStamp,o.logFormat.showLoggerName=o.logGroupRule.logFormat.showLoggerName,o.logFormat.dateFormat.formatEnum=o.logGroupRule.logFormat.dateFormat.formatEnum}console.log("Reset all settings for group "+e)},e.prototype._getLogGroupRunTimeSettingsFor=function(e){var t=[];return"all"===e?t=this._settings.getLogGroupRuntimeSettings():(this._checkIndex(e),t.push(this._settings.getLogGroupRuntimeSettings()[e])),t},e.prototype._checkIndex=function(e){if(e<0||e>=this._settings.getLogGroupRuntimeSettings().length)throw new Error("Invalid index, use listLogGroups to find out a valid one.")},e._help='\n  help(): void\n    ** Shows this help.\n\n  example(): void\n    ** Shows an example of usage.\n\n  showSettings(id: number | "all"): void\n    ** Prints settings for given group id, "all" for all group.\n\n  change(settings: LogGroupControlSettings): void\n    ** Changes the current settings for one or all log groups.\n    **\n       LogGroupControlSettings, properties of object:\n         group: number | "all"\n           ** Apply to specific group, or "all".\n           ** Required\n\n         logLevel: "Fatal" | "Error" | "Warn" | "Info" | "Debug" | "Trace" | undefined\n           ** Set log level, undefined will not change the setting.\n           ** Optional\n\n         logFormat: "Default" | "YearMonthDayTime" | "YearDayMonthWithFullTime" | "YearDayMonthTime" | undefined\n           ** Set the log format, undefined will not change the setting.\n           ** Optional\n\n         showTimestamp: boolean | undefined\n           ** Whether to show timestamp, undefined will not change the setting.\n           ** Optional\n\n         showLoggerName: boolean | undefined\n           ** Whether to show the logger name, undefined will not change the setting.\n           ** Optional\n\n  reset(id: number | "all"): void\n    ** Resets everything to original values, for one specific or for all groups.\n\n  help():\n    ** Shows this help.\n',e._example='\n  Examples:\n    change({group: "all", logLevel: "Info"})\n      ** Change loglevel to Info for all groups.\n\n    change({group: 1, recursive:false, logLevel: "Warn"})\n      ** Change logLevel for group 1 to Warn.\n\n    change({group: "all", logLevel: "Debug", logFormat: "YearDayMonthTime", showTimestamp:false, showLoggerName:false})\n      ** Change loglevel to Debug for all groups, apply format, do not show timestamp and logger names.\n',e}()},{"../log/LoggerOptions":68,"../log/standard/LFService":81,"../utils/DataStructures":88}],67:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../log/category/CategoryService"),o=e("../log/LoggerOptions"),i=e("../utils/MessageUtils"),s=function(){function e(){}return e.register=function(){if(!e.registered){e.registered=!0;var t=function(t){var r=t.data;null!==r&&e.processMessageFromExtension(r)};"undefined"!=typeof window&&(window.removeEventListener("message",t),window.addEventListener("message",t))}},e.processMessageFromExtension=function(t){if(e.registered&&"tsl-extension"===t.from){var r=t.data;switch(r.type){case"register":e.enableExtensionIntegration();break;case"request-change-loglevel":var n=r.value,o=e.applyLogLevel(n.categoryId,n.logLevel,n.recursive);o.length>0&&e.sendCategoriesRuntimeUpdateMessage(o);break;default:console.log("Unknown command to process message from extension, command was: "+r.type)}}},e.sendCategoryLogMessage=function(t){if(e.registered){var r=t.categories.map(function(e){return e.id}),n={type:"log-message",value:{categories:r,errorAsStack:t.errorAsStack,formattedMessage:i.MessageFormatUtils.renderDefaultMessage(t,!1),logLevel:o.LogLevel[t.level].toString(),message:t.messageAsString,resolvedErrorMessage:t.isResolvedErrorMessage}},s={data:n,from:"tsl-logging"};e.sendMessage(s)}},e.sendCategoriesRuntimeUpdateMessage=function(t){if(e.registered){var r=n.CategoryServiceImpl.getInstance(),i={categories:Array()};t.forEach(function(e){var t=r.getCategorySettings(e);null!=t&&i.categories.push({id:e.id,logLevel:o.LogLevel[t.logLevel].toString()})});var s={type:"categories-rt-update",value:i},a={data:s,from:"tsl-logging"};e.sendMessage(a)}},e.sendRootCategoriesToExtension=function(){if(e.registered){var t=n.CategoryServiceImpl.getInstance().getRootCategories().map(function(t){return e.getCategoryAsJSON(t)}),r={type:"root-categories-tree",value:t},o={data:r,from:"tsl-logging"};e.sendMessage(o)}},e.getCategoryAsJSON=function(t){return{children:t.children.map(function(t){return e.getCategoryAsJSON(t)}),id:t.id,logLevel:o.LogLevel[t.logLevel].toString(),name:t.name,parentId:null!=t.parent?t.parent.id:null}},e.applyLogLevel=function(t,r,i){var s=[],a=n.CategoryServiceImpl.getInstance().getCategoryById(t);return null!=a?e._applyLogLevelRecursive(a,o.LogLevel.fromString(r),i,s):console.log("Could not change log level, failed to find category with id: "+t),s},e._applyLogLevelRecursive=function(t,r,o,i){var s=n.CategoryServiceImpl.getInstance().getCategorySettings(t);null!=s&&(s.logLevel=r,i.push(t),o&&t.children.forEach(function(t){e._applyLogLevelRecursive(t,r,o,i)}))},e.getAllCategories=function(){var e=[],t=function(e,r){r.push(e),e.children.forEach(function(e){t(e,r)})};return n.CategoryServiceImpl.getInstance().getRootCategories().forEach(function(r){t(r,e)}),e},e.sendMessage=function(t){e.registered&&"undefined"!=typeof window&&window.postMessage(t,"*")},e.enableExtensionIntegration=function(){if(e.registered){n.CategoryServiceImpl.getInstance().enableExtensionIntegration(),e.sendRootCategoriesToExtension();var t=e.getAllCategories();e.sendCategoriesRuntimeUpdateMessage(t)}},e.registered=!1,e}();r.ExtensionHelper=s},{"../log/LoggerOptions":68,"../log/category/CategoryService":77,"../utils/MessageUtils":90}],68:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warn=3]="Warn",e[e.Error=4]="Error",e[e.Fatal=5]="Fatal"}(r.LogLevel||(r.LogLevel={})),function(e){function t(t){if(null==t)throw new Error("Argument must be set");switch(t.toLowerCase()){case"trace":return e.Trace;case"debug":return e.Debug;case"info":return e.Info;case"warn":return e.Warn;case"error":return e.Error;case"fatal":return e.Fatal;default:throw new Error("Unsupported value for conversion: "+t)}}e.fromString=t}(r.LogLevel||(r.LogLevel={}));!function(e){e[e.Console=0]="Console",e[e.MessageBuffer=1]="MessageBuffer",e[e.Custom=2]="Custom"}(r.LoggerType||(r.LoggerType={}));var n;!function(e){e[e.Default=0]="Default",e[e.YearMonthDayTime=1]="YearMonthDayTime",e[e.YearDayMonthWithFullTime=2]="YearDayMonthWithFullTime",e[e.YearDayMonthTime=3]="YearDayMonthTime"}(n=r.DateFormatEnum||(r.DateFormatEnum={})),function(e){function t(t){if(null==t)throw new Error("Argument must be set");switch(t.toLowerCase()){case"default":return e.Default;case"yearmonthdayTime":return e.YearMonthDayTime;case"yeardaymonthwithfulltime":return e.YearDayMonthWithFullTime;case"yeardaymonthtime":return e.YearDayMonthTime;default:throw new Error("Unsupported value for conversion: "+t)}}e.fromString=t}(n=r.DateFormatEnum||(r.DateFormatEnum={}));var o=function(){function e(e,t){void 0===e&&(e=n.Default),void 0===t&&(t="-"),this._formatEnum=e,this._dateSeparator=t}return Object.defineProperty(e.prototype,"formatEnum",{get:function(){return this._formatEnum},set:function(e){this._formatEnum=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateSeparator",{get:function(){return this._dateSeparator},set:function(e){this._dateSeparator=e},enumerable:!0,configurable:!0}),e.prototype.copy=function(){return new e(this._formatEnum,this._dateSeparator)},e}();r.DateFormat=o;var i=function(){function e(e,t,r){void 0===e&&(e=new o),void 0===t&&(t=!0),void 0===r&&(r=!0),this._showTimeStamp=!0,this._showLoggerName=!0,this._dateFormat=e,this._showTimeStamp=t,this._showLoggerName=r}return Object.defineProperty(e.prototype,"dateFormat",{get:function(){return this._dateFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTimeStamp",{get:function(){return this._showTimeStamp},set:function(e){this._showTimeStamp=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showLoggerName",{get:function(){return this._showLoggerName},set:function(e){this._showLoggerName=e},enumerable:!0,configurable:!0}),e}();r.LogFormat=i;var s=function(){function e(e,t,r){void 0===e&&(e=new o),void 0===t&&(t=!0),void 0===r&&(r=!0),this._dateFormat=e,this._showTimeStamp=t,this._showCategoryName=r}return Object.defineProperty(e.prototype,"dateFormat",{get:function(){return this._dateFormat},set:function(e){this._dateFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTimeStamp",{get:function(){return this._showTimeStamp},set:function(e){this._showTimeStamp=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showCategoryName",{get:function(){return this._showCategoryName},set:function(e){this._showCategoryName=e},enumerable:!0,configurable:!0}),e.prototype.copy=function(){return new e(this._dateFormat.copy(),this._showTimeStamp,this._showCategoryName)},e}();r.CategoryLogFormat=s},{}],69:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../utils/DataStructures"),o=e("../../utils/MessageUtils"),i=e("../LoggerOptions"),s=function(){function e(e,t,r,n,o,i,s){this._resolvedErrorMessage=!1,this._errorAsStack=null,this._message=e,this._error=t,this._categories=r,this._date=n,this._level=o,this._logFormat=i,this._ready=s}return Object.defineProperty(e.prototype,"message",{get:function(){return this._message},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categories",{get:function(){return this._categories},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"date",{get:function(){return this._date},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logFormat",{get:function(){return this._logFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMessageLogData",{get:function(){return"string"!=typeof this._message},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"messageAsString",{get:function(){return"string"==typeof this._message?this._message:this._message.msg},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logData",{get:function(){var e=null;return"string"!=typeof this._message&&(e=this.message),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isResolvedErrorMessage",{get:function(){return this._resolvedErrorMessage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorAsStack",{get:function(){return this._errorAsStack},set:function(e){this._errorAsStack=e},enumerable:!0,configurable:!0}),e.prototype.isReady=function(){return this._ready},e.prototype.setReady=function(e){this._ready=e},Object.defineProperty(e.prototype,"resolvedErrorMessage",{get:function(){return this._resolvedErrorMessage},set:function(e){this._resolvedErrorMessage=e},enumerable:!0,configurable:!0}),e}(),a=function(){function e(e,t){this.allMessages=new n.LinkedList,this.rootCategory=e,this.runtimeSettings=t}return e.prototype.trace=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._log.apply(this,[i.LogLevel.Trace,e,null,!1].concat(t))},e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._log.apply(this,[i.LogLevel.Debug,e,null,!1].concat(t))},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._log.apply(this,[i.LogLevel.Info,e,null,!1].concat(t))},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._log.apply(this,[i.LogLevel.Warn,e,null,!1].concat(t))},e.prototype.error=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];this._log.apply(this,[i.LogLevel.Error,e,t,!1].concat(r))},e.prototype.fatal=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];this._log.apply(this,[i.LogLevel.Fatal,e,t,!1].concat(r))},e.prototype.resolved=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];this._log.apply(this,[i.LogLevel.Error,e,t,!0].concat(r))},e.prototype.log=function(e,t,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];this._log.apply(this,[e,t,r,!1].concat(n))},e.prototype.getRootCategory=function(){return this.rootCategory},e.prototype.createDefaultLogMessage=function(e){return o.MessageFormatUtils.renderDefaultMessage(e,!0)},e.prototype._getMessageFormatter=function(){var e=this.runtimeSettings.getCategorySettings(this.rootCategory);if(null===e)throw new Error("Did not find CategorySettings for rootCategory: "+this.rootCategory.name);return e.formatterLogMessage},e.prototype._log=function(e,t,r,n){void 0===r&&(r=null),void 0===n&&(n=!1);for(var o=[],i=4;i<arguments.length;i++)o[i-4]=arguments[i];var s=function(){return"function"==typeof t?t():t},a=function(){return"function"==typeof r?r():r};this._logInternal.apply(this,[e,s,a,n].concat(o))},e.prototype._logInternal=function(e,t,r,n){for(var i=this,a=[],u=4;u<arguments.length;u++)a[u-4]=arguments[u];var c=[this.rootCategory];void 0!==a&&a.length>0&&(c=c.concat(a.filter(function(e){return e!==i.rootCategory})));for(var l=this,p=0;p<c.length;p++){if("break"===function(a){var u=c[a];if(null===u)throw new Error("Cannot have a null element within categories, at index="+a);var p=l.runtimeSettings.getCategorySettings(u);if(null===p)throw new Error("Category with path: "+u.getCategoryPath()+" is not registered with this logger, maybe you registered it with a different root logger?");if(p.logLevel<=e){var f=null!==r?r():null;if(null===f){var g=new s(t(),f,c,new Date,e,p.logFormat,!0);g.resolvedErrorMessage=n,l.allMessages.addTail(g),l.processMessages()}else{var d=new s(t(),f,c,new Date,e,p.logFormat,!1);d.resolvedErrorMessage=n,l.allMessages.addTail(d),o.MessageFormatUtils.renderError(f).then(function(e){d.errorAsStack=e,d.setReady(!0),i.processMessages()}).catch(function(){d.errorAsStack="<UNKNOWN> unable to get stack.",d.setReady(!0),i.processMessages()})}return"break"}}(p))break}},e.prototype.processMessages=function(){var e=this.allMessages;if(e.getSize()>0)do{var t=e.getHead();if(null!=t){if(!t.isReady())break;e.removeHead(),this.doLog(t)}}while(e.getSize()>0)},e}();r.AbstractCategoryLogger=a},{"../../utils/DataStructures":88,"../../utils/MessageUtils":90,"../LoggerOptions":68}],70:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../LoggerOptions"),o=e("./CategoryService"),i=function(){function e(t,r){if(void 0===r&&(r=null),this._children=[],this._logLevel=n.LogLevel.Error,-1!==t.indexOf("#"))throw new Error("Cannot use # in a name of a Category");this._id=e.nextId(),this._name=t,this._parent=r,null!==this._parent&&this._parent._children.push(this),o.CategoryServiceImpl.getInstance().registerCategory(this)}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},enumerable:!0,configurable:!0}),e.prototype.trace=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.loadCategoryLogger(),(n=this._logger).trace.apply(n,[e].concat(t));var n},e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.loadCategoryLogger(),(n=this._logger).debug.apply(n,[e].concat(t));var n},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.loadCategoryLogger(),(n=this._logger).info.apply(n,[e].concat(t));var n},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.loadCategoryLogger(),(n=this._logger).warn.apply(n,[e].concat(t));var n},e.prototype.error=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];this.loadCategoryLogger(),(o=this._logger).error.apply(o,[e,t].concat(r));var o},e.prototype.fatal=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];this.loadCategoryLogger(),(o=this._logger).fatal.apply(o,[e,t].concat(r));var o},e.prototype.resolved=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];this.loadCategoryLogger(),(o=this._logger).resolved.apply(o,[e,t].concat(r));var o},e.prototype.log=function(e,t,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];this.loadCategoryLogger(),(i=this._logger).log.apply(i,[e,t,r].concat(n));var i},e.prototype.getCategoryPath=function(){for(var e=this.name,t=this.parent;null!=t;)e=t.name+"#"+e,t=t.parent;return e},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.loadCategoryLogger=function(){if(this._logger||(this._logger=o.CategoryServiceImpl.getInstance().getLogger(this)),void 0===this._logger||null===this._logger)throw new Error("Failed to load a logger for category (should not happen): "+this.name)},e.nextId=function(){return e.currentId++},e.currentId=1,e}();r.Category=i},{"../LoggerOptions":68,"./CategoryService":77}],71:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../LoggerOptions"),o=function(){function e(e,t,r,o){if(void 0===e&&(e=n.LogLevel.Error),void 0===t&&(t=n.LoggerType.Console),void 0===r&&(r=new n.CategoryLogFormat),void 0===o&&(o=null),this._formatterLogMessage=null,this._logLevel=e,this._loggerType=t,this._logFormat=r,this._callBackLogger=o,this._loggerType===n.LoggerType.Custom&&null===this.callBackLogger)throw new Error("If you specify loggerType to be Custom, you must provide the callBackLogger argument")}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loggerType",{get:function(){return this._loggerType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logFormat",{get:function(){return this._logFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callBackLogger",{get:function(){return this._callBackLogger},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatterLogMessage",{get:function(){return this._formatterLogMessage},set:function(e){if(null!==e&&this._loggerType===n.LoggerType.Custom)throw new Error("You cannot specify a formatter for log messages if your loggerType is Custom");this._formatterLogMessage=e},enumerable:!0,configurable:!0}),e.prototype.copy=function(){var t=new e(this.logLevel,this.loggerType,this.logFormat.copy(),this.callBackLogger);return t.formatterLogMessage=this.formatterLogMessage,t},e}();r.CategoryConfiguration=o},{"../LoggerOptions":68}],72:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../LoggerOptions"),i=e("./AbstractCategoryLogger"),s=function(e){function t(t,r){return e.call(this,t,r)||this}return n(t,e),t.prototype.doLog=function(e){if(void 0===console)throw new Error("Console is not defined, cannot log msg: "+e.messageAsString);var t=this._getMessageFormatter(),r=void 0;r=null===t?this.createDefaultLogMessage(e):t(e);var n=!1;switch(e.level){case o.LogLevel.Trace:case o.LogLevel.Debug:break;case o.LogLevel.Info:console.info&&(console.info(r),n=!0);break;case o.LogLevel.Warn:console.warn&&(console.warn(r),n=!0);break;case o.LogLevel.Error:case o.LogLevel.Fatal:console.error&&(console.error(r),n=!0);break;default:throw new Error("Unsupported level: "+e.level)}n||console.log(r)},t}(i.AbstractCategoryLogger);r.CategoryConsoleLoggerImpl=s},{"../LoggerOptions":68,"./AbstractCategoryLogger":69}],73:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e){this._delegate=e}return Object.defineProperty(e.prototype,"delegate",{get:function(){return this._delegate},set:function(e){this._delegate=e},enumerable:!0,configurable:!0}),e.prototype.trace=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];(n=this._delegate).trace.apply(n,[e].concat(t));var n},e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];(n=this._delegate).debug.apply(n,[e].concat(t));var n},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];(n=this._delegate).info.apply(n,[e].concat(t));var n},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];(n=this._delegate).warn.apply(n,[e].concat(t));var n},e.prototype.error=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];(o=this._delegate).error.apply(o,[e,t].concat(r));var o},e.prototype.fatal=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];(o=this._delegate).fatal.apply(o,[e,t].concat(r));var o},e.prototype.resolved=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];(o=this._delegate).resolved.apply(o,[e,t].concat(r));var o},e.prototype.log=function(e,t,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];(i=this._delegate).log.apply(i,[e,t,r].concat(n));var i},e}();r.CategoryDelegateLoggerImpl=n},{}],74:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../../extension/ExtensionHelper"),i=e("./AbstractCategoryLogger"),s=function(e){function t(t,r){return e.call(this,t,r)||this}return n(t,e),t.prototype.doLog=function(e){"undefined"!=typeof window?o.ExtensionHelper.sendCategoryLogMessage(e):console.log("window is not available, you must be running in a browser for this. Dropped message.")},t}(i.AbstractCategoryLogger);r.CategoryExtensionLoggerImpl=s},{"../../extension/ExtensionHelper":67,"./AbstractCategoryLogger":69}],75:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("./AbstractCategoryLogger"),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messages=[],t}return n(t,e),t.prototype.getMessages=function(){return this.messages},t.prototype.toString=function(){return this.messages.map(function(e){return e}).join("\n")},t.prototype.doLog=function(e){var t,r=this._getMessageFormatter();t=null===r?this.createDefaultLogMessage(e):r(e),this.messages.push(t)},t}(o.AbstractCategoryLogger);r.CategoryMessageBufferLoggerImpl=i},{"./AbstractCategoryLogger":69}],76:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../LoggerOptions"),o=function(){function e(e,t,r,o,i,s){void 0===t&&(t=n.LogLevel.Error),void 0===r&&(r=n.LoggerType.Console),void 0===o&&(o=new n.CategoryLogFormat),void 0===i&&(i=null),void 0===s&&(s=null),this._formatterLogMessage=null,this._category=e,this._logLevel=t,this._loggerType=r,this._logFormat=o,this._callBackLogger=i,this._formatterLogMessage=s}return Object.defineProperty(e.prototype,"category",{get:function(){return this._category},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loggerType",{get:function(){return this._loggerType},set:function(e){this._loggerType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logFormat",{get:function(){return this._logFormat},set:function(e){this._logFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callBackLogger",{get:function(){return this._callBackLogger},set:function(e){this._callBackLogger=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatterLogMessage",{get:function(){return this._formatterLogMessage},set:function(e){this._formatterLogMessage=e},enumerable:!0,configurable:!0}),e}();r.CategoryRuntimeSettings=o},{"../LoggerOptions":68}],77:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../utils/DataStructures"),o=e("../LoggerOptions"),i=e("./CategoryConsoleLoggerImpl"),s=e("./CategoryDelegateLoggerImpl"),a=e("./CategoryExtensionLoggerImpl"),u=e("./CategoryMessageBufferImpl"),c=e("../../extension/ExtensionHelper"),l=e("./CategoryRuntimeSettings"),p=e("./CategoryConfiguration"),f=function(){function e(){this._defaultConfig=new p.CategoryConfiguration,this._mapState=new n.SimpleMap,c.ExtensionHelper.register()}return e.getInstance=function(){return null===e._INSTANCE&&(e._INSTANCE=new e),e._INSTANCE},e.prototype.getLogger=function(e){return this.createOrGetCategoryState(e).logger},e.prototype.clear=function(){this._mapState.clear(),this.setDefaultConfiguration(new p.CategoryConfiguration)},e.prototype.getCategorySettings=function(e){return this.createOrGetCategoryState(e).currentRuntimeSettings},e.prototype.getOriginalCategorySettings=function(e){return this.createOrGetCategoryState(e).originalRuntimeSettings},e.prototype.setDefaultConfiguration=function(e,t){void 0===t&&(t=!0),this._defaultConfig=e,t&&this._mapState.forEachValue(function(t){t.updateSettings(e)})},e.prototype.setConfigurationCategory=function(e,t,r){var n=this;void 0===r&&(r=!1),this.createOrGetCategoryState(t).updateSettings(e),r&&t.children.forEach(function(t){n.setConfigurationCategory(e,t,r)})},e.prototype.registerCategory=function(t){if(null===t||void 0===t)throw new Error("Category CANNOT be null/undefined");if(this._mapState.exists(e.getCategoryKey(t)))throw new Error("Cannot add this root category with name: "+t.name+", it already exists (same name in hierarchy).");this.createOrGetCategoryState(t)},e.prototype.enableExtensionIntegration=function(){var e=this;this._mapState.forEachValue(function(t){return t.enableForExtension(e)})},e.prototype.getRootCategories=function(){return this._mapState.values().filter(function(e){return null==e.category.parent}).map(function(e){return e.category})},e.prototype.getCategoryById=function(e){var t=this._mapState.values().filter(function(t){return t.category.id===e}).map(function(e){return e.category});return 1===t.length?t[0]:null},e.prototype.createOrGetCategoryState=function(t){var r=e.getCategoryKey(t),n=this._mapState.get(r);if(void 0!==n)return n;var o=this.createState(t);return this._mapState.put(r,o),o},e.prototype.createState=function(e){var t=this;return new g(e,function(){return t._defaultConfig},function(e,r){return t.createLogger(e,r)})},e.prototype.createLogger=function(e,t){switch(e.loggerType){case o.LoggerType.Console:return new i.CategoryConsoleLoggerImpl(t,this);case o.LoggerType.MessageBuffer:return new u.CategoryMessageBufferLoggerImpl(t,this);case o.LoggerType.Custom:if(null===e.callBackLogger)throw new Error("Cannot create custom logger, custom callback is null");return e.callBackLogger(t,this);default:throw new Error("Cannot create a Logger for LoggerType: "+e.loggerType)}},e.getCategoryKey=function(e){return e.getCategoryPath()},e._INSTANCE=null,e}();r.CategoryServiceImpl=f;var g=function(){function e(e,t,r){this._category=e,this._lazyState=new d(e,t,r)}return Object.defineProperty(e.prototype,"category",{get:function(){return this._category},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logger",{get:function(){return this._lazyState.getLogger()},enumerable:!0,configurable:!0}),
Object.defineProperty(e.prototype,"originalRuntimeSettings",{get:function(){return this._lazyState.getOriginalRuntimeSettings()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentRuntimeSettings",{get:function(){return this._lazyState.getCurrentRuntimeSettings()},enumerable:!0,configurable:!0}),e.prototype.enableForExtension=function(e){this._lazyState.enableForExtension(e)},e.prototype.updateSettings=function(e){this._lazyState.updateSettings(e)},e}(),d=function(){function e(e,t,r){this._category=e,this._defaultConfig=t,this._createLogger=r}return e.prototype.isLoaded=function(){return void 0!==this._logger},e.prototype.getLogger=function(){return this.loadLoggerOnDemand(),this._delegateLogger},e.prototype.getOriginalRuntimeSettings=function(){return this.loadLoggerOnDemand(),this._originalRuntimeSettings},e.prototype.getCurrentRuntimeSettings=function(){return this.loadLoggerOnDemand(),this._currentRuntimeSettings},e.prototype.enableForExtension=function(e){this.loadLoggerOnDemand(),this._wrappedLogger instanceof a.CategoryExtensionLoggerImpl||(console.log("Reconfiguring logger for extension for category: "+this._category.name),this._wrappedLogger=new a.CategoryExtensionLoggerImpl(this._category,e),this._delegateLogger.delegate=this._wrappedLogger)},e.prototype.updateSettings=function(e){this.isLoaded()?(this._currentRuntimeSettings.logLevel=e.logLevel,this._currentRuntimeSettings.loggerType=e.loggerType,this._currentRuntimeSettings.logFormat=e.logFormat,this._currentRuntimeSettings.callBackLogger=e.callBackLogger,this._currentRuntimeSettings.formatterLogMessage=e.formatterLogMessage,this._logger=this._createLogger(e,this._category),this._wrappedLogger instanceof a.CategoryExtensionLoggerImpl||(this._wrappedLogger=this._logger),this._delegateLogger.delegate=this._wrappedLogger):this._defaultConfig=function(){return e}},e.prototype.loadLoggerOnDemand=function(){this.isLoaded()||(this._logger=this._createLogger(this._defaultConfig(),this._category),this._wrappedLogger=this._logger,this._delegateLogger=new s.CategoryDelegateLoggerImpl(this._wrappedLogger),this._originalRuntimeSettings=this.initNewSettings(),this._currentRuntimeSettings=this.initNewSettings())},e.prototype.initNewSettings=function(){var e=this._defaultConfig().copy();return new l.CategoryRuntimeSettings(this._category,e.logLevel,e.loggerType,e.logFormat,e.callBackLogger,e.formatterLogMessage)},e}()},{"../../extension/ExtensionHelper":67,"../../utils/DataStructures":88,"../LoggerOptions":68,"./CategoryConfiguration":71,"./CategoryConsoleLoggerImpl":72,"./CategoryDelegateLoggerImpl":73,"./CategoryExtensionLoggerImpl":74,"./CategoryMessageBufferImpl":75,"./CategoryRuntimeSettings":76}],78:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./CategoryService"),o=function(){function e(){}return e.getLogger=function(e){return n.CategoryServiceImpl.getInstance().getLogger(e)},e.clear=function(){return n.CategoryServiceImpl.getInstance().clear()},e.setDefaultConfiguration=function(e,t){void 0===t&&(t=!0),n.CategoryServiceImpl.getInstance().setDefaultConfiguration(e,t)},e.setConfigurationCategory=function(e,t,r){void 0===r&&(r=!1),n.CategoryServiceImpl.getInstance().setConfigurationCategory(e,t,r)},e}();r.CategoryServiceFactory=o},{"./CategoryService":77}],79:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../LoggerOptions"),o=e("../../utils/DataStructures"),i=e("../../utils/MessageUtils"),s=function(){function e(e,t,r,n,o,i,s,a){this._errorAsStack=null,this._error=null,this._loggerName=e,this._message=t,this._errorAsStack=r,this._error=n,this._logGroupRule=o,this._date=i,this._level=s,this._ready=a}return Object.defineProperty(e.prototype,"loggerName",{get:function(){return this._loggerName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(e){this._message=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorAsStack",{get:function(){return this._errorAsStack},set:function(e){this._errorAsStack=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},set:function(e){this._error=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logGroupRule",{get:function(){return this._logGroupRule},set:function(e){this._logGroupRule=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"date",{get:function(){return this._date},set:function(e){this._date=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(e){this._level=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMessageLogData",{get:function(){return"string"!=typeof this._message},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return this._ready},set:function(e){this._ready=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"messageAsString",{get:function(){return"string"==typeof this._message?this._message:this._message.msg},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logData",{get:function(){var e=null;return"string"!=typeof this._message&&(e=this.message),e},enumerable:!0,configurable:!0}),e}(),a=function(){function e(e,t){this._allMessages=new o.LinkedList,this._open=!0,this._name=e,this._logGroupRuntimeSettings=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e.prototype.trace=function(e,t){void 0===t&&(t=null),this._log(n.LogLevel.Trace,e,t)},e.prototype.debug=function(e,t){void 0===t&&(t=null),this._log(n.LogLevel.Debug,e,t)},e.prototype.info=function(e,t){void 0===t&&(t=null),this._log(n.LogLevel.Info,e,t)},e.prototype.warn=function(e,t){void 0===t&&(t=null),this._log(n.LogLevel.Warn,e,t)},e.prototype.error=function(e,t){void 0===t&&(t=null),this._log(n.LogLevel.Error,e,t)},e.prototype.fatal=function(e,t){void 0===t&&(t=null),this._log(n.LogLevel.Fatal,e,t)},e.prototype.isTraceEnabled=function(){return this._logGroupRuntimeSettings.level===n.LogLevel.Trace},e.prototype.isDebugEnabled=function(){return this._logGroupRuntimeSettings.level<=n.LogLevel.Debug},e.prototype.isInfoEnabled=function(){return this._logGroupRuntimeSettings.level<=n.LogLevel.Info},e.prototype.isWarnEnabled=function(){return this._logGroupRuntimeSettings.level<=n.LogLevel.Warn},e.prototype.isErrorEnabled=function(){return this._logGroupRuntimeSettings.level<=n.LogLevel.Error},e.prototype.isFatalEnabled=function(){return this._logGroupRuntimeSettings.level<=n.LogLevel.Fatal},e.prototype.getLogLevel=function(){return this._logGroupRuntimeSettings.level},e.prototype.isOpen=function(){return this._open},e.prototype.close=function(){this._open=!1,this._allMessages.clear()},e.prototype.createDefaultLogMessage=function(e){return i.MessageFormatUtils.renderDefaultLog4jMessage(e,!0)},e.prototype._getMessageFormatter=function(){return this._logGroupRuntimeSettings.formatterLogMessage},e.prototype._log=function(e,t,r){if(void 0===r&&(r=null),this._open&&this._logGroupRuntimeSettings.level<=e){var n=function(){return"function"==typeof t?t():t},o=function(){return"function"==typeof r?r():r};this._allMessages.addTail(this.createMessage(e,n,o,new Date)),this.processMessages()}},e.prototype.createMessage=function(e,t,r,n){var o=this,a=r();if(null!==a){var u=new s(this._name,t(),null,a,this._logGroupRuntimeSettings.logGroupRule,n,e,!1);return i.MessageFormatUtils.renderError(a).then(function(e){u.errorAsStack=e,u.ready=!0,o.processMessages()}).catch(function(){u.errorAsStack="<UNKNOWN> unable to get stack.",u.ready=!0,o.processMessages()}),u}return new s(this._name,t(),null,a,this._logGroupRuntimeSettings.logGroupRule,n,e,!0)},e.prototype.processMessages=function(){var e=this._allMessages;if(e.getSize()>0)do{var t=e.getHead();if(null!=t){if(!t.ready)break;e.removeHead(),null!==t.message&&this.doLog(t)}}while(e.getSize()>0)},e}();r.AbstractLogger=a},{"../../utils/DataStructures":88,"../../utils/MessageUtils":90,"../LoggerOptions":68}],80:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("./AbstractLogger"),i=e("../LoggerOptions"),s=function(e){function t(t,r){return e.call(this,t,r)||this}return n(t,e),t.prototype.doLog=function(e){if(void 0===console)throw new Error("Console is not defined, cannot log msg: "+e.message);var t=!1,r=e.level,n=this._getMessageFormatter(),o=void 0;switch(o=null===n?this.createDefaultLogMessage(e):n(e),r){case i.LogLevel.Trace:case i.LogLevel.Debug:break;case i.LogLevel.Info:console.info&&(console.info(o),t=!0);break;case i.LogLevel.Warn:console.warn&&(console.warn(o),t=!0);break;case i.LogLevel.Error:case i.LogLevel.Fatal:console.error&&(console.error(o),t=!0);break;default:throw new Error("Log level not supported: "+r)}t||console.log(o)},t}(o.AbstractLogger);r.ConsoleLoggerImpl=s},{"../LoggerOptions":68,"./AbstractLogger":79}],81:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../utils/DataStructures"),o=e("../LoggerOptions"),i=e("./LoggerFactoryImpl"),s=e("../../extension/ExtensionHelper"),a=e("./LogGroupRule"),u=e("./LoggerFactoryOptions"),c=function(){function e(){this._nameCounter=1,this._mapFactories=new n.SimpleMap,s.ExtensionHelper.register()}return e.getInstance=function(){return null===e._INSTANCE&&(e._INSTANCE=new e),e._INSTANCE},e.prototype.createLoggerFactory=function(e){void 0===e&&(e=null);var t="LoggerFactory"+this._nameCounter++;return this.createNamedLoggerFactory(t,e)},e.prototype.createNamedLoggerFactory=function(t,r){if(void 0===r&&(r=null),this._mapFactories.exists(t))throw new Error("LoggerFactory with name "+t+" already exists.");var n;return n=null!==r?new i.LoggerFactoryImpl(t,r):new i.LoggerFactoryImpl(t,e.createDefaultOptions()),this._mapFactories.put(t,n),n},e.prototype.closeLoggers=function(){this._mapFactories.values().forEach(function(e){e.closeLoggers()}),this._mapFactories.clear(),this._nameCounter=1},e.prototype.getRuntimeSettingsForLoggerFactories=function(){var e=[];return this._mapFactories.forEachValue(function(t){return e.push(t)}),e},e.prototype.getLogGroupSettings=function(e,t){var r=this._mapFactories.get(e);return void 0===r?null:r.getLogGroupRuntimeSettingsByIndex(t)},e.prototype.getLoggerFactoryRuntimeSettingsByName=function(e){var t=this._mapFactories.get(e);return void 0===t?null:t},e.createDefaultOptions=function(){return(new u.LoggerFactoryOptions).addLogGroupRule(new a.LogGroupRule(new RegExp(".+"),o.LogLevel.Info))},e._INSTANCE=null,e}(),l=function(){function e(){}return e.createLoggerFactory=function(t){return void 0===t&&(t=null),e.INSTANCE_SERVICE.createLoggerFactory(t)},e.createNamedLoggerFactory=function(t,r){if(void 0===r&&(r=null),t===e.DEFAULT_LOGGER_FACTORY_NAME)throw new Error("LoggerFactory name: "+e.DEFAULT_LOGGER_FACTORY_NAME+" is reserved and cannot be used.");return e.INSTANCE_SERVICE.createNamedLoggerFactory(t,r)},e.closeLoggers=function(){return e.INSTANCE_SERVICE.closeLoggers()},e.getRuntimeSettings=function(){return e.INSTANCE_SERVICE},Object.defineProperty(e,"DEFAULT",{get:function(){return e.getDefault()},enumerable:!0,configurable:!0}),e.getDefault=function(){return null===e.DEFAULT_LOGGER_FACTORY&&(e.DEFAULT_LOGGER_FACTORY=e.DEFAULT_LOGGER_FACTORY=e.INSTANCE_SERVICE.createNamedLoggerFactory(e.DEFAULT_LOGGER_FACTORY_NAME,(new u.LoggerFactoryOptions).addLogGroupRule(new a.LogGroupRule(new RegExp(".+"),o.LogLevel.Error)))),e.DEFAULT_LOGGER_FACTORY},e.DEFAULT_LOGGER_FACTORY_NAME="DEFAULT",e.INSTANCE_SERVICE=c.getInstance(),e.DEFAULT_LOGGER_FACTORY=null,e}();r.LFService=l},{"../../extension/ExtensionHelper":67,"../../utils/DataStructures":88,"../LoggerOptions":68,"./LogGroupRule":82,"./LoggerFactoryImpl":84,"./LoggerFactoryOptions":85}],82:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../LoggerOptions"),o=function(){function e(e,t,r,o,i){void 0===r&&(r=new n.LogFormat),void 0===o&&(o=n.LoggerType.Console),void 0===i&&(i=null),this._formatterLogMessage=null,this._regExp=e,this._level=t,this._logFormat=r,this._loggerType=o,this._callBackLogger=i}return Object.defineProperty(e.prototype,"regExp",{get:function(){return this._regExp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loggerType",{get:function(){return this._loggerType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logFormat",{get:function(){return this._logFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callBackLogger",{get:function(){return this._callBackLogger},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatterLogMessage",{get:function(){return this._formatterLogMessage},set:function(e){if(null!==e&&this._loggerType===n.LoggerType.Custom)throw new Error("You cannot specify a formatter for log messages if your loggerType is Custom");this._formatterLogMessage=e},enumerable:!0,configurable:!0}),e}();r.LogGroupRule=o},{"../LoggerOptions":68}],83:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../LoggerOptions"),o=function(){function e(e){this._formatterLogMessage=null,this._logGroupRule=e,this._level=e.level,this._loggerType=e.loggerType,this._logFormat=new n.LogFormat(new n.DateFormat(e.logFormat.dateFormat.formatEnum,e.logFormat.dateFormat.dateSeparator),e.logFormat.showTimeStamp,e.logFormat.showLoggerName),this._callBackLogger=e.callBackLogger,this._formatterLogMessage=e.formatterLogMessage}return Object.defineProperty(e.prototype,"logGroupRule",{get:function(){return this._logGroupRule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(e){this._level=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loggerType",{get:function(){return this._loggerType},set:function(e){this._loggerType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logFormat",{get:function(){return this._logFormat},set:function(e){this._logFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callBackLogger",{get:function(){return this._callBackLogger},set:function(e){this._callBackLogger=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatterLogMessage",{get:function(){return this._formatterLogMessage},set:function(e){this._formatterLogMessage=e},enumerable:!0,configurable:!0}),e}();r.LogGroupRuntimeSettings=o},{"../LoggerOptions":68}],84:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../utils/DataStructures"),o=e("../LoggerOptions"),i=e("./ConsoleLoggerImpl"),s=e("./MessageBufferLoggerImpl"),a=e("./AbstractLogger"),u=e("./LogGroupRuntimeSettings"),c=function(){function e(e,t){this._loggers=new n.SimpleMap,this._logGroupRuntimeSettingsIndexed=[],this._loggerToLogGroupSettings=new n.SimpleMap,this._name=e,this.configure(t)}return e.prototype.configure=function(e){this._options=e,this.closeLoggers(),this._loggerToLogGroupSettings.clear(),this._logGroupRuntimeSettingsIndexed=[];for(var t=this._options.logGroupRules,r=0;r<t.length;r++)this._logGroupRuntimeSettingsIndexed.push(new u.LogGroupRuntimeSettings(t[r]))},e.prototype.getLogger=function(e){if(!this._options.enabled)throw new Error("LoggerFactory is not enabled, please check your options passed in");var t=this._loggers.get(e);return void 0!==t?t:(t=this.loadLogger(e),this._loggers.put(e,t),t)},e.prototype.isEnabled=function(){return this._options.enabled},e.prototype.closeLoggers=function(){this._loggers.forEachValue(function(e){e instanceof a.AbstractLogger&&e.close()}),this._loggers.clear()},e.prototype.getName=function(){return this._name},e.prototype.getLogGroupRuntimeSettingsByIndex=function(e){return e>=0&&e<this._logGroupRuntimeSettingsIndexed.length?this._logGroupRuntimeSettingsIndexed[e]:null},e.prototype.getLogGroupRuntimeSettingsByLoggerName=function(e){var t=this._loggerToLogGroupSettings.get(e);return void 0===t?null:t},e.prototype.getLogGroupRuntimeSettings=function(){return this._logGroupRuntimeSettingsIndexed.slice(0)},e.prototype.loadLogger=function(e){for(var t=this._options.logGroupRules,r=0;r<t.length;r++){var n=t[r];if(n.regExp.test(e)){var a=this._logGroupRuntimeSettingsIndexed[r],u=void 0;switch(n.loggerType){case o.LoggerType.Console:u=new i.ConsoleLoggerImpl(e,a);break;case o.LoggerType.MessageBuffer:u=new s.MessageBufferLoggerImpl(e,a);break;case o.LoggerType.Custom:if(null==n.callBackLogger)throw new Error("Cannot create a custom logger, custom callback is null");u=n.callBackLogger(e,a);break;default:throw new Error("Cannot create a Logger for LoggerType: "+n.loggerType)}return this._loggerToLogGroupSettings.put(e,a),u}}throw new Error("Failed to find a match to create a Logger for: "+e)},e}();r.LoggerFactoryImpl=c},{"../../utils/DataStructures":88,"../LoggerOptions":68,"./AbstractLogger":79,"./ConsoleLoggerImpl":80,"./LogGroupRuntimeSettings":83,"./MessageBufferLoggerImpl":86}],85:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(){this._logGroupRules=[],this._enabled=!0}return e.prototype.addLogGroupRule=function(e){return this._logGroupRules.push(e),this},e.prototype.setEnabled=function(e){return this._enabled=e,this},Object.defineProperty(e.prototype,"logGroupRules",{get:function(){return this._logGroupRules},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},enumerable:!0,configurable:!0}),e}();r.LoggerFactoryOptions=n},{}],86:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("./AbstractLogger"),i=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.messages=[],n}return n(t,e),t.prototype.close=function(){this.messages=[],e.prototype.close.call(this)},t.prototype.getMessages=function(){return this.messages},t.prototype.toString=function(){return this.messages.map(function(e){return e}).join("\n")},t.prototype.doLog=function(e){var t,r=this._getMessageFormatter();t=null===r?this.createDefaultLogMessage(e):r(e),this.messages.push(t)},t}(o.AbstractLogger);r.MessageBufferLoggerImpl=i},{"./AbstractLogger":79}],87:[function(e,t,r){"use strict";function n(){console.log("help()\n   ** Shows this help\n\n getLogControl(): LoggerControl\n   ** Returns LoggerControl Object, use to dynamically change loglevels for log4j logging.\n   ** Call .help() on LoggerControl object for available options.\n\n getCategoryControl(): CategoryServiceControl\n   ** Returns CategoryServiceControl Object, use to dynamically change loglevels for category logging.\n   ** Call .help() on CategoryServiceControl object for available options.\n")}function o(){return new s.LoggerControlImpl}function i(){return new a.CategoryServiceControlImpl}Object.defineProperty(r,"__esModule",{value:!0});var s=e("./control/LogGroupControl"),a=e("./control/CategoryServiceControl"),u=e("./extension/ExtensionHelper");r.ExtensionHelper=u.ExtensionHelper;var c=e("./log/category/AbstractCategoryLogger");r.AbstractCategoryLogger=c.AbstractCategoryLogger;var l=e("./log/category/CategoryConsoleLoggerImpl");r.CategoryConsoleLoggerImpl=l.CategoryConsoleLoggerImpl;var p=e("./log/category/CategoryDelegateLoggerImpl");r.CategoryDelegateLoggerImpl=p.CategoryDelegateLoggerImpl;var f=e("./log/category/Category");r.Category=f.Category;var g=e("./log/category/CategoryRuntimeSettings");r.CategoryRuntimeSettings=g.CategoryRuntimeSettings;var d=e("./log/category/CategoryConfiguration");r.CategoryConfiguration=d.CategoryConfiguration;var h=e("./log/category/CategoryMessageBufferImpl");r.CategoryMessageBufferLoggerImpl=h.CategoryMessageBufferLoggerImpl;var y=e("./log/category/CategoryServiceFactory");r.CategoryServiceFactory=y.CategoryServiceFactory;var m=e("./log/standard/LoggerFactoryOptions");r.LoggerFactoryOptions=m.LoggerFactoryOptions;var v=e("./log/standard/LogGroupRule");r.LogGroupRule=v.LogGroupRule;var _=e("./log/standard/LFService");r.LFService=_.LFService;var b=e("./log/standard/AbstractLogger");r.AbstractLogger=b.AbstractLogger;var w=e("./log/standard/ConsoleLoggerImpl");r.ConsoleLoggerImpl=w.ConsoleLoggerImpl;var L=e("./log/standard/MessageBufferLoggerImpl");r.MessageBufferLoggerImpl=L.MessageBufferLoggerImpl;var E=e("./log/LoggerOptions");r.CategoryLogFormat=E.CategoryLogFormat,r.DateFormat=E.DateFormat,r.DateFormatEnum=E.DateFormatEnum,r.LogFormat=E.LogFormat,r.LoggerType=E.LoggerType,r.LogLevel=E.LogLevel;var S=e("./utils/DataStructures");r.SimpleMap=S.SimpleMap,r.LinkedList=S.LinkedList,function(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}(e("./utils/JSONHelper"));var O=e("./utils/MessageUtils");r.MessageFormatUtils=O.MessageFormatUtils,r.help=n,r.getLogControl=o,r.getCategoryControl=i},{"./control/CategoryServiceControl":65,"./control/LogGroupControl":66,"./extension/ExtensionHelper":67,"./log/LoggerOptions":68,"./log/category/AbstractCategoryLogger":69,"./log/category/Category":70,"./log/category/CategoryConfiguration":71,"./log/category/CategoryConsoleLoggerImpl":72,"./log/category/CategoryDelegateLoggerImpl":73,"./log/category/CategoryMessageBufferImpl":75,"./log/category/CategoryRuntimeSettings":76,"./log/category/CategoryServiceFactory":78,"./log/standard/AbstractLogger":79,"./log/standard/ConsoleLoggerImpl":80,"./log/standard/LFService":81,"./log/standard/LogGroupRule":82,"./log/standard/LoggerFactoryOptions":85,"./log/standard/MessageBufferLoggerImpl":86,"./utils/DataStructures":88,"./utils/JSONHelper":89,"./utils/MessageUtils":90}],88:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e){this._previous=null,this._next=null,this._value=e}return Object.defineProperty(e.prototype,"previous",{get:function(){return this._previous},set:function(e){this._previous=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"next",{get:function(){return this._next},set:function(e){this._next=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e}(),o=function(){function e(){this.head=null,this.size=0}return e.prototype.addHead=function(e){if(!this.createHeadIfNeeded(e)){if(null==this.head)throw new Error("This should never happen, list implementation broken");var t=this.head.next,r=new n(e);null!=t&&(t.previous=r,r.next=t),this.head=r}this.size++},e.prototype.addTail=function(e){if(!this.createHeadIfNeeded(e)){var t=this.getTailNode();if(null==t)throw new Error("List implementation broken");var r=new n(e);t.next=r,r.previous=t}this.size++},e.prototype.clear=function(){this.head=null,this.size=0},e.prototype.getHead=function(){return null!=this.head?this.head.value:null},e.prototype.removeHead=function(){if(null!=this.head){var e=this.head,t=e.value;return this.head=e.next,this.size--,t}return null},e.prototype.getTail=function(){var e=this.getTailNode();return null!=e?e.value:null},e.prototype.removeTail=function(){var e=this.getTailNode();if(null!=e){if(e===this.head)this.head=null;else{var t=e.previous;if(null==t)throw new Error("List implementation is broken");t.next=null}return this.size--,e.value}return null},e.prototype.getSize=function(){return this.size},e.prototype.filter=function(e){var t=function(e,r,n){e(r.value)&&n.push(r.value);var o=r.next;null!=o&&t(e,o,n)},r=[],n=this.head;return null!=n&&t(e,n,r),r},e.prototype.createHeadIfNeeded=function(e){return null==this.head&&(this.head=new n(e),!0)},e.prototype.getTailNode=function(){if(null==this.head)return null;for(var e=this.head;null!=e.next;)e=e.next;return e},e}();r.LinkedList=o;var i=function(){function e(){this.array={}}return e.prototype.put=function(e,t){this.array[e]=t},e.prototype.get=function(e){return this.array[e]},e.prototype.exists=function(e){return void 0!==this.array[e]},e.prototype.remove=function(e){var t=this.array[e];return void 0!==t&&delete this.array[e],t},e.prototype.keys=function(){var e=[];for(var t in this.array)this.array.hasOwnProperty(t)&&e.push(t);return e},e.prototype.values=function(){var e=[];for(var t in this.array)this.array.hasOwnProperty(t)&&e.push(this.get(t));return e},e.prototype.size=function(){return this.keys().length},e.prototype.isEmpty=function(){return 0===this.size()},e.prototype.clear=function(){this.array={}},e.prototype.forEach=function(e){var t=0;for(var r in this.array)if(this.array.hasOwnProperty(r)){var n=this.array[r];e(r,n,t),t++}},e.prototype.forEachValue=function(e){var t=0;for(var r in this.array)if(this.array.hasOwnProperty(r)){var n=this.array[r];e(n,t),t++}},e}();r.SimpleMap=i;var s=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e},enumerable:!0,configurable:!0}),e}();r.TuplePair=s;var a=function(){function e(){this.data=[]}return e.prototype.append=function(e){if(void 0===e||null==e)throw new Error("String must be set, cannot append null or undefined");return this.data.push(e),this},e.prototype.appendLine=function(e){return this.data.push(e+"\n"),this},e.prototype.isEmpty=function(){return 0===this.data.length},e.prototype.clear=function(){this.data=[]},e.prototype.toString=function(e){return void 0===e&&(e=""),this.data.join(e)},e}();r.StringBuilder=a},{}],89:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../log/LoggerOptions"),i=e("./DataStructures"),s=function(){function e(e){this._value=e}return e.prototype.getValue=function(){return this._value},e.prototype.toString=function(){var e=this.getValue();return null!=e?e.toString():"null"},e}(),a=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t}(s),u=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t}(s),c=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.toString=function(){var e=this.getValue();return null!=e?JSON.stringify(e.toString()):"null"},t}(s),l=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t}(s),p=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.toString=function(){var e=this.getValue();return null!=e?e.toString():"null"},t}(s),f=function(e){function t(){return e.call(this,null)||this}return n(t,e),t.prototype.toString=function(){return"null"},t}(s),g=function(){function e(){}return e.toJSONType=function(e){if(null===e)return new f;if("string"==typeof e)return new c(e);if("number"==typeof e)return new u(e);if("boolean"==typeof e)return new a(e);if(e instanceof d)return new l(e);throw new Error("Type not supported for value: "+e)},e}(),d=function(){function e(){this.values=new i.SimpleMap}return e.prototype.addBoolean=function(t,r){return this.checkName(t),e.checkValue(r),this.values.put(t,new a(r)),this},e.prototype.addNumber=function(t,r){return this.checkName(t),e.checkValue(r),this.values.put(t,new u(r)),this},e.prototype.addString=function(t,r){return this.checkName(t),e.checkValue(r),this.values.put(t,new c(r)),this},e.prototype.addNull=function(e){return this.checkName(e),this.values.put(e,new f),this},e.prototype.addArray=function(t,r){if(this.checkName(t),e.checkValue(r),null==r)throw new Error("Cannot add array as null");return this.values.put(t,new p(r)),this},e.prototype.addObject=function(t,r){if(this.checkName(t),e.checkValue(r),null==r)throw new Error("Cannot add object as null");return this.values.put(t,new l(r)),this},e.prototype.toString=function(e){var t=this;void 0===e&&(e=!1);var r=!1,n=new i.StringBuilder;return n.append("{"),this.values.keys().forEach(function(e){var o=t.values.get(e);null!=o&&(r&&n.append(","),n.append('"').append(e).append('":').append(o.toString()),r=!0)}),n.append("}"),n.toString()},e.prototype.checkName=function(e){if(null==e||void 0===e)throw new Error("Name is null or undefined");if(this.values.exists(e))throw new Error("Name "+e+" is already present for this object")},e.checkValue=function(e){if(void 0===e)throw new Error("Value is undefined")},e}();r.JSONObject=d;var h=function(){function e(){this.objects=[]}return e.prototype.add=function(e){if(void 0===e)throw new Error("Object is not allowed to be undefined");return this.objects.push(g.toJSONType(e)),this},e.prototype.toString=function(e){void 0===e&&(e=!1);var t=new i.StringBuilder;return t.append("["),this.objects.forEach(function(e,r){r>0&&t.append(","),t.append(e.toString())}),t.append("]"),t.toString()},e}();r.JSONArray=h;var y=function(){function e(){}return e.categoryToJSON=function(t,r){var n=new h;e._categoryToJSON(t,n,r);var o=new d;return o.addArray("categories",n),o},e._categoryToJSON=function(t,r,n){var i=new d;i.addNumber("id",t.id),i.addString("name",t.name),i.addString("logLevel",o.LogLevel[t.logLevel].toString()),null!=t.parent?i.addNumber("parent",t.parent.id):i.addNull("parent"),r.add(i),n&&t.children.forEach(function(t){e._categoryToJSON(t,r,n)})},e}();r.JSONHelper=y},{"../log/LoggerOptions":68,"./DataStructures":88}],90:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("stacktrace-js"),o=e("../log/LoggerOptions"),i=function(){function e(){}return e.renderDate=function(e,t){var r=function(e,t,r){var n=t-e.length;if(n>0){for(var o="",i=0;i<n;i++)o+=r;return o+=e}return e},n=function(e){return r(e.getFullYear().toString(),4,"0")},i=function(e){return r((e.getMonth()+1).toString(),2,"0")},s=function(e){return r(e.getDate().toString(),2,"0")},a=function(e){return r(e.getHours().toString(),2,"0")},u=function(e){return r(e.getMinutes().toString(),2,"0")},c=function(e){return r(e.getSeconds().toString(),2,"0")},l=function(e){return r(e.getMilliseconds().toString(),3,"0")},p=t.dateSeparator,f="";switch(t.formatEnum){case o.DateFormatEnum.Default:f=n(e)+p+i(e)+p+s(e)+" "+a(e)+":"+u(e)+":"+c(e)+","+l(e);break;case o.DateFormatEnum.YearMonthDayTime:f=n(e)+p+i(e)+p+s(e)+" "+a(e)+":"+u(e)+":"+c(e);break;case o.DateFormatEnum.YearDayMonthWithFullTime:f=n(e)+p+s(e)+p+i(e)+" "+a(e)+":"+u(e)+":"+c(e)+","+l(e);break;case o.DateFormatEnum.YearDayMonthTime:f=n(e)+p+s(e)+p+i(e)+" "+a(e)+":"+u(e)+":"+c(e);break;default:throw new Error("Unsupported date format enum: "+t.formatEnum)}return f},e.renderDefaultMessage=function(t,r){var n="",i=t.logFormat;i.showTimeStamp&&(n+=e.renderDate(t.date,i.dateFormat)+" "),n+=o.LogLevel[t.level].toUpperCase(),t.isResolvedErrorMessage&&(n+=" (resolved)"),n+=" ",i.showCategoryName&&(n+="[",t.categories.forEach(function(e,t){t>0&&(n+=", "),n+=e.name}),n+="]");var s="",a="",u=t.message;if("string"==typeof u)s=u;else{var c=u;s=c.msg,
c.data&&(a=" [data]: "+(c.ds?c.ds(c.data):JSON.stringify(c.data)))}return n+=" "+s+a,r&&null!==t.errorAsStack&&(n+="\n"+t.errorAsStack),n},e.renderDefaultLog4jMessage=function(t,r){var n=t.logGroupRule.logFormat,i="";n.showTimeStamp&&(i+=e.renderDate(t.date,n.dateFormat)+" "),i+=o.LogLevel[t.level].toUpperCase()+" ",n.showLoggerName&&(i+="["+t.loggerName+"]");var s="",a="";if("string"==typeof t.message)s=t.message;else{var u=t.message;s=u.msg,u.data&&(a=" [data]: "+(u.ds?u.ds(u.data):JSON.stringify(u.data)))}return i+=" "+s+a,r&&null!==t.errorAsStack&&(i+="\n"+t.errorAsStack),i},e.renderError=function(e){var t=e.name+": "+e.message+"\n@";return new Promise(function(r){n.fromError(e,{offline:!0}).then(function(e){var n=e.map(function(e){return e.toString()}).join("\n  ");t+="\n"+n,r(t)}).catch(function(){t="Unexpected error object was passed in. ";try{t+="Could not resolve it, stringified object: "+JSON.stringify(e)}catch(e){t+="Could not resolve it or stringify it."}r(t)})})},e}();r.MessageFormatUtils=i},{"../log/LoggerOptions":68,"stacktrace-js":58}]},{},[17])(17)});
//# sourceMappingURL=connect.min.js.map
